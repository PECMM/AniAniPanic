<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="twitter:card" content="summary_large_image">
  <meta property="og:title" content="七夕 月野笹ちろる飾り🌙🌲短冊">
  <meta property="og:url"   content="https://pecmm.github.io/tanabata-tree/tirol.html" />
  <meta property="og:image" content="https://pecmm.github.io/tanabata-tree/thumb/tirol.png?">
  <title>七夕 ささ飾り短冊ジェネレーター</title>
  <link rel='stylesheet' href='../assets/tooltip.css' />
  <style>
    @font-face {
      font-family: 'tatefont';
      src: url('../assets/font/SourceHanSerif-Regular-tate.woff2') format('woff2'),
           url('../assets/font/SourceHanSerif-Regular-tate.woff') format('woff'),
           url('../assets/font/SourceHanSerif-Regular-tate.otf') format('opentype');
    }
    
    body {
      margin: 0;
    }
    
    #main-area {
      position: relative;
    }
    #main-area > canvas {
      position: absolute;
      border: solid 2px #CCCCCC;
    }
    
    #controller {
      margin-top: 2em;
      margin-left: 8px;
    }
    #controller table th {
      text-align: right;
    }
    #controller #message {
      display: none;
      margin: 0.5em 0;
      padding: 0.3em 1em;
      color: #FF0000;
      background-color: #FFFF00;
    }
    #controller input[type='number'] {
      width: 4em;
      text-align: right;
    }
    
    
    footer {
      margin-top: 3em;
      margin-left: 8px;
      padding-top: 0.5em;
      border-top: solid 2px #cccccc;
    }
    
    
    .loading-text, .loading {
      font-size: 4em;
    }
    
    /**
     * loading 参考 https://qiita.com/soarflat/items/4a302e0cafa21477707f
     */
    .loading {
      vertical-align: middle;
      display: inline-block;
      margin: 0 0.3em;
      text-indent: -9999em;
      width : 1em;
      height: 1em;
      border-radius: 50%;
      background: #792a2a;
      background: -moz-linear-gradient(left, #792a2a 10%, rgba(121,42,42, 0) 42%);
      background: -webkit-linear-gradient(left, #792a2a 10%, rgba(121,42,42, 0) 42%);
      background: -o-linear-gradient(left, #792a2a 10%, rgba(121,42,42, 0) 42%);
      background: -ms-linear-gradient(left, #792a2a 10%, rgba(121,42,42, 0) 42%);
      background: linear-gradient(to right, #792a2a 10%, rgba(121,42,42, 0) 42%);
      position: relative;
      -webkit-animation: load3 1.4s infinite linear;
      animation: load3 1.4s infinite linear;
      -webkit-transform: translateZ(0);
      -ms-transform: translateZ(0);
      transform: translateZ(0);
    }
    .loading:before {
      width: 50%;
      height: 50%;
      background: #792a2a;
      border-radius: 100% 0 0 0;
      position: absolute;
      top: 0;
      left: 0;
      content: '';
    }
    .loading:after {
      background: #ffffff;
      width: 75%;
      height: 75%;
      border-radius: 50%;
      content: '';
      margin: auto;
      position: absolute;
      top: 0;
      left: 0;
      bottom: 0;
      right: 0;
    }
    @-webkit-keyframes load3 {
      0% {
        -webkit-transform: rotate(0deg);
        transform: rotate(0deg);
      }
      100% {
        -webkit-transform: rotate(360deg);
        transform: rotate(360deg);
      }
    }
    @keyframes load3 {
      0% {
        -webkit-transform: rotate(0deg);
        transform: rotate(0deg);
      }
      100% {
        -webkit-transform: rotate(360deg);
        transform: rotate(360deg);
      }
    }
  </style>
</head>
<body>
  <div id='loading-area'><span class='loading-text'>Loading...</span><span class='loading'></span></div>
  <div id='main-area'>
    <canvas id='canvas-tree'></canvas>
    <canvas id='canvas-card'></canvas>
    <canvas id='canvas-work'></canvas>
  </div>
  
  <div id='controller'>
    <div>version: <span id="version"></span></div>
    
    <table border='1' cellpadding='5'>
      <tr><th>飾る場所</th><td>
        <span><label>吊り紐の先端の座標：( <input type='number' id='position-x' min='0' /></label><label> , <input type='number' id='position-y' min='0' /> )</label>
      </td></tr>
      <tr><th>名前</th><td>
        <input type='text' id='tanzaku-name' />
      </td></tr>
      <tr><th>願い事🙏</th><td>
        <textarea id='tanzaku-text' cols='80' rows='4'></textarea>
      </td></tr>
      <tr><th>短冊の大きさ</th><td id='card-size-radios'>
        <label><input type='radio' name='card-size' value='L' />大</label>
        <label><input type='radio' name='card-size' value='M' />中</label>
        <label><input type='radio' name='card-size' value='S' />小</label>
      </td></tr>
      <tr><th>願い事テキストの配置</th><td id='text-vertical-align-area'>
        <label><input type='radio' name='text-vertical-align' value='Top'    />上</label>
        <label><input type='radio' name='text-vertical-align' value='Middle' />中</label>
        <label><input type='radio' name='text-vertical-align' value='Bottom' />下</label>
      </td></tr>
      <tr><th>短冊の枠の色</th><td>
        <input type='color' id='borderColor' />
      </td></tr>
    </table>
    <button id='draw-test'>テスト表示</button><br />
    <p id='message'></p>
    
    <br />
    <br />
    <button id='draw' class='tltp-on-hover tltp-disabled tltp-top' data-tltp-text='テスト表示に成功した場合のみ確定できます'>確定する</button>
  </div>
  
  <footer></footer>
  
  <script>
    const AppVersion = "1.0.0";
    
    // ここから
const _0x23da=['log','#message','calculateDrawBox','tltp-for-prev-input','ななし3','debugLine','355692lhQKWQ','treeImagePath','クリックした位置に設定できます','ななし','setCanvasTextStyle','position','add','ななし4','assign','lineTo','#canvas-tree','rotX','defaultValues','text','defaultCardHeight','drawThisTo','cardSize','MONOSPACED','get','push','strokeRect','fillText','click','#loading-area','これらの情報はインターネット上に公開されます。','boxSizing','ltrOpenSymbol','parentElement','filter','textFontSize','Letters','button','tanzakuText','trnY','addEventListener','areaHeight','rotate','chr','measureText','#main-area','borderRadius','POST','areaLeft','fillStyle','load','getAngleTimeline','tanzakuSettings','3YIsOIv','Center','reverse','nameFontSize','何らかのエラーが発生しました。','offsetX','#card-size-radios','textTop','confirmDialog','target','textVAlign','innerWidth','motionIntervalMS','strapLength','calculateLines','getContext','params','sutegana','div','1em\x20tatefont','object','ltrDashSymbol','Monospaced','inline-block','そやさんにたくさん\x0a「つかまえた～！」されたい🥰','#borderColor','setAttribute','fixed','appendChild','block','pageOptions','ltrPunctual','restore','ltrCloseSymbol','length','split','white-space:pre-line;','100%','Escape','hanako','ctrlKey','animationSettings','border','aabcde!(&%_3;).','preventDefault','cardHalfWidth','charas','textLeft','table','showDebug','#position-x','ちゅき🥰','818795JLRliQ','ちろる先生が号泣しませんように\x0a😭😭','font-size:2em;\x20color:#FF0000;','value','style','Left','defaultIsYes','find','#99FF22','debugLetter','getComputedStyle','getDummy','linePadding','none','flat','canvasSettings','bodyWidth','#canvas-work','altKey','key','onload','#8e7495','237065egjWOA','json','#5247E9','url','hogehoge','nextSibling','textAlign','left','replaceAll','insertAdjacentHTML','font','post-res','[name=\x22text-vertical-align\x22]:checked','わ「ぎゃあーあ、国――国～～ああ。と」わ🥰😭','backgroundImageFilter','max','ななし1','querySelector','fill','#333333','Middle','eonerror','minWidth','unexpected\x20VerticalAlign:\x27','fontFamilies','getBoundingClientRect','[name=\x22card-size\x22]:checked','fillRect','maxCount','#000000','opacity','match','classList','strokeStyle','FontType','41085vZyaFU','unexcpected\x20FontType:\x20','[name=\x22card-size\x22][value=\x22M\x22]','title','fontColor','#draw-test','disabled','\x0a――――――――――\x0a★★dummy\x20post★★','hAlign','bodyHeight','floor','serif','keydown','unexpected\x20HorizontalAlign:\x27','margin','entries','#tanzaku-name','cardNameFontSize','borderColor','removeChild','positionElement','Right','whiteSpace','Tab','」』）','#CCCCCC','fonts','ごはんつぶ\x0a\u3000\u3000\u3000あつめてうまし\x0a\u3000\u3000\u3000\u3000\u3000\u3000もがみがわ','#FFCCFF','#37A958','cardHeight','join','positionY','borderWidth','textContent','top','316369tnJqtZ','ぎゃあ――あ～','display','then','zenkakuSpace','Auto','moveTo','no-cors','slice','preCalcCharaSize','ceil','height','Cancel','letterBodyH','drawImage','cardTextFontSize','#FFFFFF','#canvas-card','getOwnPropertyNames','padding','debugEnabled','fontWeight','name','chrSize','_other','dummy','0px','postDummy','keypress','string','all','#EEEEEE','AUTO','cardBorderWidth','x座標が範囲外です','#text-vertical-align-area','chy','#AAAAAA','justifyContent','Proportional','lineWidth','pre-line','post','placeholder','save','charCodeAt','backgroundColor','checked','offsetY','_props','footer','forEach','stringify','debug','#position-y','width','canvas','Bottom','rotY','240px','fontSize','application/x-www-form-urlencoded','letterTopY','stopPropagation','cardHeightType','[name=\x22card-size\x22][value=\x22','#888888','solid\x20#DDDDDD\x203px','change','min','cardSettings','beginPath','referenceHTML','6juuPwX','indexOf','insertBefore','Top','areaTop','arcTo','「『（','translate','map','105527bvZheL','flex','clearRect','chx','個人情報や公序良俗に反する内容が含まれている場合は一旦Cancelし、修正・削除をお願いします','focus','trnX','[name=\x22text-vertical-align\x22][value=\x22Middle\x22]','removeEventListener','reduce','tatefont','defaultStrapLength','specifiedFontType','#version','innerHeight','removeAttribute','backgroundImagePath','space-around','marginBottom','alphabetic','zIndex','next','1056423EpjfBW','actualBoundingBoxAscent','insert','startsWith','fontType','12px\x200','shiftKey','body','pow'];const _0x166f56=_0x1c4a;(function(_0x1a3df8,_0x21c845){const _0x2c60c6=_0x1c4a;while(!![]){try{const _0x2eb045=parseInt(_0x2c60c6(0x243))+-parseInt(_0x2c60c6(0x1b2))*-parseInt(_0x2c60c6(0x295))+parseInt(_0x2c60c6(0x28c))*-parseInt(_0x2c60c6(0x1fc))+parseInt(_0x2c60c6(0x2ab))+parseInt(_0x2c60c6(0x21f))+-parseInt(_0x2c60c6(0x2ba))+parseInt(_0x2c60c6(0x1e6));if(_0x2eb045===_0x21c845)break;else _0x1a3df8['push'](_0x1a3df8['shift']());}catch(_0x54bf6c){_0x1a3df8['push'](_0x1a3df8['shift']());}}}(_0x23da,0xbc463),document['querySelector'](_0x166f56(0x2a2))[_0x166f56(0x241)]=AppVersion);function _0x1c4a(_0x5a6c04,_0x11b06f){return _0x1c4a=function(_0x23da22,_0x1c4a25){_0x23da22=_0x23da22-0x1a4;let _0x1c9d7b=_0x23da[_0x23da22];return _0x1c9d7b;},_0x1c4a(_0x5a6c04,_0x11b06f);}function loadSyncImage(_0x29d367){return new Promise((_0x1a35b2,_0x2f60d0)=>{const _0x118b27=_0x1c4a;let _0x16305e=new Image();_0x16305e[_0x118b27(0x1fa)]=()=>_0x1a35b2(_0x16305e),_0x16305e[_0x118b27(0x211)]=_0x521497=>_0x2f60d0(_0x521497),_0x16305e['src']=_0x29d367;});}function newElem(_0x49d1b1,_0x1984c1=[],_0x54ad5d=[],_0x303f9d={}){const _0x15dc6e=_0x166f56,_0x4bfb5b=document['createElement'](_0x49d1b1);return _0x54ad5d['length']>0x0&&_0x4bfb5b[_0x15dc6e(0x21c)][_0x15dc6e(0x2c0)](..._0x54ad5d),Object[_0x15dc6e(0x255)](_0x303f9d)[_0x15dc6e(0x276)](_0x7b2abb=>{_0x4bfb5b['setAttribute'](_0x7b2abb,_0x303f9d[_0x7b2abb]);}),_0x1984c1['forEach'](_0x4815e0=>{const _0x4b08d1=_0x15dc6e;typeof _0x4815e0===_0x4b08d1(0x260)?_0x4bfb5b[_0x4b08d1(0x1ce)](document['createTextNode'](_0x4815e0)):_0x4bfb5b[_0x4b08d1(0x1ce)](_0x4815e0);}),_0x4bfb5b;}function floorFloat(_0x104c5c,_0x4f7e6a=0x0){const _0x1ae715=_0x166f56,_0x26d8ab=Math[_0x1ae715(0x2b3)](0xa,_0x4f7e6a);return Math['floor'](_0x104c5c*_0x26d8ab)/_0x26d8ab;}function randRangedInt(_0x47c50f,_0x1847c0){const _0x39608c=_0x166f56;return Math[_0x39608c(0x229)](Math['random']()*_0x1847c0)+_0x47c50f;}function areSame(_0x3ea922){const _0x54c39b=_0x166f56;if(_0x3ea922[_0x54c39b(0x1d4)]==0x0)return![];for(let _0x4d169d=0x1;_0x4d169d<_0x3ea922[_0x54c39b(0x1d4)];_0x4d169d+=0x1){if(_0x3ea922[0x0]!==_0x3ea922[_0x4d169d])return![];}return!![];}function showConfirmTextDialog(_0x49111e,_0xc1c1ca){const _0x8fc2f7=_0x166f56,_0x44948d=newElem('p',[_0x49111e]);return _0x44948d[_0x8fc2f7(0x1ea)][_0x8fc2f7(0x235)]=_0x8fc2f7(0x26c),showConfirmDialog(_0x44948d,_0xc1c1ca);}function showConfirmDialog(_0x5e140d,_0xd443f1){const _0x228c1f=_0x166f56;_0xd443f1=Object[_0x228c1f(0x2c2)]({'baseElement':document[_0x228c1f(0x2b2)],'focusable':![],'yesLabel':'OK','noLabel':_0x228c1f(0x24f),'defaultIsYes':!![],'positionElement':window},_0xd443f1);const _0x2df272=_0xd443f1['baseElement'],_0xcefdf9=_0xd443f1['focusable'],_0x485d3b=_0xd443f1['yesLabel'],_0x16bbf2=_0xd443f1['noLabel'],_0x5c91cd=_0xd443f1[_0x228c1f(0x1ec)],_0x27bab5=_0xd443f1[_0x228c1f(0x233)],_0x4782bd=_0x16bbf2==='',_0x4cad0b=newElem(_0x228c1f(0x2d9),[_0x485d3b]),_0x1ad693=newElem(_0x228c1f(0x2d9),[_0x16bbf2]);_0x4782bd&&(_0x1ad693[_0x228c1f(0x1ea)][_0x228c1f(0x245)]='none');const _0x30c121=_0x4782bd?[_0x4cad0b]:[_0x4cad0b,_0x1ad693],_0x524cab=newElem(_0x228c1f(0x1c4),_0x30c121),_0x18a955=newElem(_0x228c1f(0x1c4),[_0x5e140d,newElem('hr'),_0x524cab],[_0x228c1f(0x1ba)]),_0x460966=newElem(_0x228c1f(0x1c4)),_0x25b498=0xf423f;_0x18a955[_0x228c1f(0x1ea)]['position']='fixed',_0x18a955[_0x228c1f(0x1ea)][_0x228c1f(0x2a9)]=_0x25b498,_0x18a955['style'][_0x228c1f(0x212)]=_0x228c1f(0x27e),_0x18a955[_0x228c1f(0x1ea)][_0x228c1f(0x2d3)]='border-box',_0x18a955[_0x228c1f(0x1ea)][_0x228c1f(0x1dc)]=_0x228c1f(0x286),_0x18a955[_0x228c1f(0x1ea)][_0x228c1f(0x1ab)]='20px',_0x18a955[_0x228c1f(0x1ea)][_0x228c1f(0x22d)]=0x0,_0x18a955[_0x228c1f(0x1ea)][_0x228c1f(0x256)]='5px\x2030px\x2010px',_0x18a955['style']['backgroundColor']=_0x228c1f(0x253),_0x524cab[_0x228c1f(0x1ea)][_0x228c1f(0x245)]=_0x228c1f(0x296),_0x524cab[_0x228c1f(0x1ea)][_0x228c1f(0x269)]=_0x228c1f(0x2a6),_0x460966[_0x228c1f(0x1ea)][_0x228c1f(0x2bf)]=_0x228c1f(0x1cd),_0x460966[_0x228c1f(0x1ea)]['zIndex']=_0x25b498-0x1,_0x460966[_0x228c1f(0x1ea)][_0x228c1f(0x242)]=0x0,_0x460966[_0x228c1f(0x1ea)][_0x228c1f(0x203)]=0x0,_0x460966['style'][_0x228c1f(0x27a)]='100%',_0x460966['style']['height']=_0x228c1f(0x1d7),_0x460966['style']['border']=_0x228c1f(0x25d),_0x460966[_0x228c1f(0x1ea)][_0x228c1f(0x256)]=_0x228c1f(0x25d),_0x460966[_0x228c1f(0x1ea)]['margin']=_0x228c1f(0x25d),_0x460966[_0x228c1f(0x1ea)][_0x228c1f(0x271)]=_0x228c1f(0x219),_0x460966[_0x228c1f(0x1ea)][_0x228c1f(0x21a)]=0.3;!_0x5e140d[_0x228c1f(0x1ea)][_0x228c1f(0x22d)]&&!_0x5e140d[_0x228c1f(0x1ea)]['marginTop']&&!_0x5e140d['style'][_0x228c1f(0x2a7)]&&(_0x5e140d[_0x228c1f(0x1ea)][_0x228c1f(0x22d)]=_0x228c1f(0x2b0));const _0x4a294e=function(_0x21e575){const _0x3dff29=_0x228c1f,_0x57723c=_0x21e575[0x0],_0xdb94ff=_0x21e575[_0x21e575['length']-0x1],_0x4479c5=[_0xdb94ff,_0x21e575,_0x57723c][_0x3dff29(0x1f4)]();return _0x121e8f=>{const _0x4eb99e=_0x3dff29;if(_0x121e8f[_0x4eb99e(0x1f9)]===_0x4eb99e(0x236)&&!_0x121e8f[_0x4eb99e(0x1f8)]&&!_0x121e8f[_0x4eb99e(0x1da)]&&!_0x121e8f['metaKey']){_0x121e8f[_0x4eb99e(0x282)](),_0x121e8f['preventDefault']();const _0x18da73=_0x4479c5[_0x4eb99e(0x28d)](_0x121e8f[_0x4eb99e(0x1bb)],0x1);_0x18da73===-0x1?(_0x121e8f[_0x4eb99e(0x2b1)]?_0xdb94ff:_0x57723c)[_0x4eb99e(0x29a)]():_0x4479c5[_0x18da73+(_0x121e8f['shiftKey']?-0x1:0x1)][_0x4eb99e(0x29a)]();}else _0x121e8f[_0x4eb99e(0x1f9)]===_0x4eb99e(0x1d8)&&!_0x121e8f[_0x4eb99e(0x1f8)]&&!_0x121e8f[_0x4eb99e(0x1da)]&&!_0x121e8f[_0x4eb99e(0x2b1)]&&!_0x121e8f['metaKey']&&(_0x121e8f[_0x4eb99e(0x282)](),_0x121e8f[_0x4eb99e(0x1de)](),_0x1ad693[_0x4eb99e(0x2d0)]());};},_0x1b8af1=_0x4a294e(_0x30c121);[_0x4cad0b,_0x1ad693,_0x18a955,_0x460966]['forEach'](_0x4c315f=>{const _0x1ddb79=_0x228c1f;_0x4c315f['addEventListener'](_0x1ddb79(0x22b),_0x1b8af1),_0x4c315f[_0x1ddb79(0x1a5)](_0x1ddb79(0x25f),_0x1b8af1);}),_0x2df272[_0x228c1f(0x1ce)](_0x460966),_0x2df272[_0x228c1f(0x1ce)](_0x18a955);const _0x3239e2=window[_0x228c1f(0x1f0)](_0x18a955),_0x39f190=_0x27bab5===window?{'width':window[_0x228c1f(0x1bd)],'height':window[_0x228c1f(0x2a3)]}:_0x27bab5[_0x228c1f(0x215)]();return _0x18a955[_0x228c1f(0x1ea)][_0x228c1f(0x242)]=(_0x39f190[_0x228c1f(0x24e)]-parseInt(_0x3239e2['height'],0xa))/0x2+'px',_0x18a955[_0x228c1f(0x1ea)][_0x228c1f(0x203)]=(_0x39f190[_0x228c1f(0x27a)]-parseInt(_0x3239e2[_0x228c1f(0x27a)],0xa))/0x2+'px',_0x4782bd||_0x5c91cd?_0x4cad0b[_0x228c1f(0x29a)]():_0x1ad693['focus'](),new Promise((_0x1aebf3,_0x7d54e)=>{const _0x3db586=_0x228c1f;_0x4cad0b[_0x3db586(0x1a5)]('click',()=>{const _0x52e604=_0x3db586;_0x30c121[_0x52e604(0x276)](_0x28b7d4=>_0x28b7d4[_0x52e604(0x1cc)](_0x52e604(0x225),'disabled')),_0x2df272[_0x52e604(0x232)](_0x460966),_0x2df272[_0x52e604(0x232)](_0x18a955),_0x1aebf3(!![]);}),_0x1ad693[_0x3db586(0x1a5)]('click',()=>{const _0xea77d7=_0x3db586;_0x30c121[_0xea77d7(0x276)](_0x132c9f=>_0x132c9f[_0xea77d7(0x1cc)]('disabled',_0xea77d7(0x225))),_0x2df272[_0xea77d7(0x232)](_0x460966),_0x2df272[_0xea77d7(0x232)](_0x18a955),_0x1aebf3(![]);});});}function roundedRect(_0x22b6fc,_0x2fa1b6,_0x5245d3,_0x57a21a,_0x50465c,_0x5aadea,_0x455dfd=_0x166f56(0x253)){const _0x33ed8a=_0x166f56;_0x22b6fc[_0x33ed8a(0x26f)](),_0x22b6fc[_0x33ed8a(0x21d)]=_0x455dfd,_0x22b6fc[_0x33ed8a(0x1ae)]=_0x455dfd,_0x22b6fc[_0x33ed8a(0x28a)](),_0x22b6fc[_0x33ed8a(0x249)](_0x2fa1b6,_0x5245d3+_0x5aadea),_0x22b6fc[_0x33ed8a(0x2c3)](_0x2fa1b6,_0x5245d3+_0x50465c-_0x5aadea),_0x22b6fc[_0x33ed8a(0x291)](_0x2fa1b6,_0x5245d3+_0x50465c,_0x2fa1b6+_0x5aadea,_0x5245d3+_0x50465c,_0x5aadea),_0x22b6fc[_0x33ed8a(0x2c3)](_0x2fa1b6+_0x57a21a-_0x5aadea,_0x5245d3+_0x50465c),_0x22b6fc['arcTo'](_0x2fa1b6+_0x57a21a,_0x5245d3+_0x50465c,_0x2fa1b6+_0x57a21a,_0x5245d3+_0x50465c-_0x5aadea,_0x5aadea),_0x22b6fc[_0x33ed8a(0x2c3)](_0x2fa1b6+_0x57a21a,_0x5245d3+_0x5aadea),_0x22b6fc[_0x33ed8a(0x291)](_0x2fa1b6+_0x57a21a,_0x5245d3,_0x2fa1b6+_0x57a21a-_0x5aadea,_0x5245d3,_0x5aadea),_0x22b6fc[_0x33ed8a(0x2c3)](_0x2fa1b6+_0x5aadea,_0x5245d3),_0x22b6fc[_0x33ed8a(0x291)](_0x2fa1b6,_0x5245d3,_0x2fa1b6,_0x5245d3+_0x5aadea,_0x5aadea),_0x22b6fc[_0x33ed8a(0x20e)](),_0x22b6fc[_0x33ed8a(0x1d2)]();}const VerticalTexts={'debugEnabled':![],'FontType':{'Auto':_0x166f56(0x263),'Monospaced':_0x166f56(0x2cb),'Proportional':'PROPORTIONAL'},'Letters':{'_other':{'text':''},'ltrDashSymbol':{'text':'―'},'ltrOpenSymbol':{'text':_0x166f56(0x292)},'ltrCloseSymbol':{'text':_0x166f56(0x237)},'ltrPunctual':{'text':'、。'},'zenkakuSpace':{'text':'\u3000'},'sutegana':{'text':'ぁぃぅぇぉっゃゅょゎァィゥェォッャュョヵヶ'},'find':function(_0x26b756){const _0xef8bab=_0x166f56;return!this[_0xef8bab(0x274)]&&(this[_0xef8bab(0x274)]=Object[_0xef8bab(0x22e)](this)[_0xef8bab(0x294)](_0x385f5d=>({'name':_0x385f5d[0x0],'value':_0x385f5d[0x1]}))[_0xef8bab(0x2d6)](_0x5eeb83=>typeof _0x5eeb83['value']===_0xef8bab(0x1c6))[_0xef8bab(0x2d6)](_0x2e44a0=>!_0x2e44a0[_0xef8bab(0x259)][_0xef8bab(0x2ae)]('_'))[_0xef8bab(0x294)](_0x5a7c37=>{const _0x798157=_0xef8bab;return _0x5a7c37[_0x798157(0x1e9)][_0x798157(0x259)]=_0x5a7c37[_0x798157(0x259)],_0x5a7c37[_0x798157(0x1e9)];}),this['_other'][_0xef8bab(0x259)]='other',this['_props'][_0xef8bab(0x25b)]=this['_other']),this['_props'][_0xef8bab(0x1ed)](_0x10e472=>_0x10e472[_0xef8bab(0x2c7)]['includes'](_0x26b756))||this[_0xef8bab(0x25b)];}},'setCanvasTextStyle':function(_0x100abf,_0xc65130){const _0x328032=_0x166f56,_0x254c0d=_0xc65130[_0x328032(0x214)][_0x328032(0x1d4)]===0x0?'\x27\x27':_0xc65130[_0x328032(0x214)][_0x328032(0x294)](_0x5dd234=>'\x22'+_0x5dd234+'\x22')[_0x328032(0x23e)](',');_0x100abf[_0x328032(0x206)]=(_0xc65130['fontStyle']??'')+'\x20'+(_0xc65130[_0x328032(0x258)]??'')+'\x20'+_0xc65130[_0x328032(0x27f)]+'px\x20'+_0x254c0d,_0x100abf['fillStyle']=_0xc65130[_0x328032(0x223)],_0x100abf[_0x328032(0x202)]=_0x328032(0x203),_0x100abf['textBaseline']=_0x328032(0x2a8);},'preCalcCharaSize':function(_0x2a8a5f,_0x2e1a43,_0x425c4b){const _0x1a28c9=_0x166f56;_0x2a8a5f[_0x1a28c9(0x26f)](),VerticalTexts[_0x1a28c9(0x2be)](_0x2a8a5f,_0x425c4b);const _0x167b7f=(_0x2e1a43[_0x1a28c9(0x21b)](/[\uD800-\uDBFF][\uDC00-\uDFFF]|[^\uD800-\uDFFF]/g)||[])[_0x1a28c9(0x294)](_0x231094=>{const _0x43aa6e=_0x1a28c9,_0x424840=_0x2a8a5f[_0x43aa6e(0x1a9)](_0x231094);return{'chr':_0x231094,'chrSize':_0x424840,'width':_0x424840[_0x43aa6e(0x27a)],'verticalLetter':VerticalTexts[_0x43aa6e(0x2d8)][_0x43aa6e(0x1ed)](_0x231094)};});return _0x2a8a5f[_0x1a28c9(0x1d2)](),{'charas':_0x167b7f,'params':_0x425c4b};},'decideFontType':function(_0x5dd349,_0x1b36f6=VerticalTexts['FontType']['Auto']){const _0x4b3706=_0x166f56,_0xef2bab=_0x309e27=>{const _0x16dac1=_0x1c4a;if(_0x1b36f6===VerticalTexts[_0x16dac1(0x21e)][_0x16dac1(0x1c8)])return!![];if(_0x1b36f6===VerticalTexts[_0x16dac1(0x21e)][_0x16dac1(0x26a)])return![];const _0x4b11f7=[],_0x14b012=[];return _0x309e27[_0x16dac1(0x276)](_0x6964dc=>_0x6964dc[_0x16dac1(0x1a8)][_0x16dac1(0x270)](0x0)<=0x7f?_0x4b11f7[_0x16dac1(0x2cd)](_0x6964dc):_0x14b012[_0x16dac1(0x2cd)](_0x6964dc)),_0x14b012[_0x16dac1(0x1d4)]>0x0?areSame(_0x14b012[_0x16dac1(0x294)](_0x4d61e5=>_0x4d61e5[_0x16dac1(0x27a)])):areSame(_0x4b11f7[_0x16dac1(0x294)](_0x335e86=>_0x335e86['width']));};return _0x5dd349['every'](_0x1f253b=>_0xef2bab(_0x1f253b['charas']))?VerticalTexts['FontType']['Monospaced']:VerticalTexts['FontType'][_0x4b3706(0x26a)];},'calculateDrawBox':function(_0x5a8812,_0x2f9689){const _0x34d719=_0x166f56,_0x307038=_0x5a8812['map'](_0x43ee82=>_0x43ee82['width'])[_0x34d719(0x29e)]((_0x4190ba,_0x5cfd0c)=>_0x4190ba>_0x5cfd0c?_0x4190ba:_0x5cfd0c,0x0);let _0x452ee6=0x0,_0x5444a2=0x0;return _0x5a8812['forEach'](_0x46981e=>{const _0x90587b=_0x34d719,_0x53a7dc=_0x46981e['verticalLetter'];let _0x3cb1a9=0x0,_0x5d27d9=0x0,_0x3c05f9=0x1,_0x1dda91=0x1,_0x37865c=0x0,_0x593537=0x0;if(_0x2f9689[_0x90587b(0x2af)]===VerticalTexts['FontType']['Monospaced']){if(_0x53a7dc==VerticalTexts[_0x90587b(0x2d8)][_0x90587b(0x1c7)]){}else{if(_0x53a7dc==VerticalTexts[_0x90587b(0x2d8)][_0x90587b(0x2d4)]){}else{if(_0x53a7dc==VerticalTexts['Letters']['ltrCloseSymbol']){}else{if(_0x53a7dc==VerticalTexts[_0x90587b(0x2d8)][_0x90587b(0x1d1)]){}else{if(_0x53a7dc==VerticalTexts['Letters']['zenkakuSpace']){}else{if(_0x53a7dc==VerticalTexts[_0x90587b(0x2d8)][_0x90587b(0x1c3)]){}else{}}}}}}}else{if(_0x2f9689[_0x90587b(0x2af)]===VerticalTexts['FontType'][_0x90587b(0x26a)]){if(_0x53a7dc==VerticalTexts['Letters'][_0x90587b(0x1c7)])_0x3cb1a9=_0x2f9689[_0x90587b(0x27f)]*0.02,_0x5d27d9=-_0x2f9689['fontSize']*0.05;else{if(_0x53a7dc==VerticalTexts[_0x90587b(0x2d8)][_0x90587b(0x2d4)])_0x3cb1a9=_0x2f9689['fontSize']*0.4,_0x5d27d9=_0x2f9689['fontSize']*0.4;else{if(_0x53a7dc==VerticalTexts[_0x90587b(0x2d8)][_0x90587b(0x1d3)])_0x3cb1a9=_0x2f9689[_0x90587b(0x27f)]*0.1,_0x5d27d9=_0x2f9689[_0x90587b(0x27f)]*0.5;else{if(_0x53a7dc==VerticalTexts[_0x90587b(0x2d8)][_0x90587b(0x1d1)])_0x3cb1a9=_0x2f9689[_0x90587b(0x27f)]*0.15,_0x5d27d9=_0x2f9689[_0x90587b(0x27f)]*0.4;else{if(_0x53a7dc==VerticalTexts[_0x90587b(0x2d8)][_0x90587b(0x247)])_0x37865c=_0x46981e[_0x90587b(0x27a)];else _0x53a7dc==VerticalTexts['Letters'][_0x90587b(0x1c3)]?(_0x3cb1a9=_0x2f9689['fontSize']*0.2,_0x5d27d9=_0x2f9689['fontSize']*0.4):(_0x3cb1a9=_0x2f9689[_0x90587b(0x27f)]*0.2,_0x5d27d9=_0x2f9689['fontSize']*0.25);}}}}}else throw new Error(_0x90587b(0x220)+_0x2f9689[_0x90587b(0x2af)]);}const _0x15944f=_0x3c05f9*_0x46981e[_0x90587b(0x25a)][_0x90587b(0x2ac)]+_0x37865c,_0x2e15ec=_0x1dda91*_0x46981e[_0x90587b(0x25a)]['actualBoundingBoxDescent']+_0x593537,_0x583664=_0x15944f+_0x2e15ec,_0x358d96=_0x5444a2+_0x3cb1a9;_0x46981e[_0x90587b(0x250)]=_0x583664,_0x46981e[_0x90587b(0x281)]=_0x358d96,_0x46981e[_0x90587b(0x298)]=(_0x307038-_0x46981e[_0x90587b(0x27a)])*0.5,_0x46981e['chy']=_0x358d96+_0x15944f,_0x452ee6=Math[_0x90587b(0x20b)](_0x452ee6,_0x583664),_0x5444a2+=_0x583664+_0x5d27d9;}),{'charas':_0x5a8812,'letterWidth':_0x307038,'letterHeight':_0x452ee6,'bodyWidth':_0x307038,'bodyHeight':_0x5444a2};},'calculateLines':function(_0x23f08a,_0x3e4c51,_0x226b46){const _0x12b4cb=_0x166f56;let _0x5cb94c=_0x3e4c51[_0x12b4cb(0x294)](_0x3632dd=>VerticalTexts[_0x12b4cb(0x24c)](_0x23f08a,_0x3632dd,_0x226b46));return _0x226b46[_0x12b4cb(0x2af)]===VerticalTexts['FontType']['Auto']&&(_0x226b46['fontType']=VerticalTexts['decideFontType'](_0x5cb94c),_0x5cb94c=_0x3e4c51[_0x12b4cb(0x294)](_0x21a73e=>VerticalTexts[_0x12b4cb(0x24c)](_0x23f08a,_0x21a73e,_0x226b46))),_0x5cb94c[_0x12b4cb(0x294)](_0x4b6abc=>VerticalTexts[_0x12b4cb(0x2b6)](_0x4b6abc[_0x12b4cb(0x1e0)],_0x226b46));},'drawLine':function(_0xd0c965,_0x10e3e8,_0x1ad147,_0x102200=0x0,_0x161add=0x0){const _0xb09a2f=_0x166f56;_0xd0c965[_0xb09a2f(0x26f)](),VerticalTexts[_0xb09a2f(0x2be)](_0xd0c965,_0x1ad147),_0x10e3e8[_0xb09a2f(0x276)](_0x2bacea=>{const _0x1d187e=_0xb09a2f;VerticalTexts[_0x1d187e(0x257)]&&(_0xd0c965[_0x1d187e(0x26b)]=0x1,_0xd0c965[_0x1d187e(0x21d)]='#999',_0xd0c965[_0x1d187e(0x2ce)](_0x102200+_0x2bacea[_0x1d187e(0x298)],_0x161add+_0x2bacea[_0x1d187e(0x281)],_0x2bacea['width'],_0x2bacea[_0x1d187e(0x250)])),_0xd0c965[_0x1d187e(0x2cf)](_0x2bacea[_0x1d187e(0x1a8)],_0x102200+_0x2bacea[_0x1d187e(0x298)],_0x161add+_0x2bacea[_0x1d187e(0x267)]);}),_0xd0c965[_0xb09a2f(0x1d2)]();}},HorizontalAlign={'Left':'Left','Center':_0x166f56(0x1b3),'Right':_0x166f56(0x234)},VerticalAlign={'Top':_0x166f56(0x28f),'Middle':'Middle','Bottom':_0x166f56(0x27c)};function generateDrawTanzaku(_0x373ba7){const _0x1db14b=_0x166f56,_0x4a77fd=_0x373ba7['cardHalfWidth'],_0x456f2a=_0x373ba7[_0x1db14b(0x2c8)],_0x21b2c8=_0x373ba7[_0x1db14b(0x2a0)],_0x59627d=_0x373ba7[_0x1db14b(0x240)],_0x23a50e=_0x373ba7[_0x1db14b(0x2d7)],_0x13b65e=_0x373ba7[_0x1db14b(0x1b5)],_0x85833d=Math[_0x1db14b(0x229)](_0x59627d/0x4)+0x1,_0x53330b=Math[_0x1db14b(0x24d)](_0x59627d*0.8),_0x1f8a14=_0x373ba7[_0x1db14b(0x1ef)]??![],_0x47c3f0=_0x373ba7[_0x1db14b(0x2b9)]??![],_0x326e0f=(_0x38e75a,_0x112033,_0xa091d6)=>{const _0x10b638=_0x1db14b,_0x516567=_0xa091d6[_0x10b638(0x27f)],_0x1dff5b=_0xa091d6[_0x10b638(0x1ad)],_0x219a2b=_0xa091d6[_0x10b638(0x290)],_0xe6659c=_0xa091d6['areaWidth'],_0x2cc7e7=_0xa091d6[_0x10b638(0x1a6)],_0x47ff3e=_0xa091d6[_0x10b638(0x227)],_0x53e8d6=_0xa091d6['vAlign'],_0xb2f997=_0xa091d6[_0x10b638(0x1f2)]??floorFloat(_0xa091d6['fontSize']*0.1,0x1),_0x451a6e=_0xa091d6[_0x10b638(0x2a1)]??VerticalTexts['FontType'][_0x10b638(0x248)],_0x575c2f=_0x112033[_0x10b638(0x1d5)]('\x0a')[_0x10b638(0x294)](_0x4042bf=>_0x4042bf['replaceAll'](/[ \r\n]/g,''))[_0x10b638(0x2d6)](_0x220174=>_0x220174),_0x264d5a=_0xe6659c-(_0x575c2f[_0x10b638(0x1d4)]-0x1)*_0xb2f997,_0x28888f={'fontColor':_0xa091d6[_0x10b638(0x223)]??_0x10b638(0x219),'fontSize':_0x516567,'fontFamilies':[_0x10b638(0x29f),_0x10b638(0x22a)],'fontType':_0x451a6e};let _0x3f1c1c;{_0x3f1c1c=VerticalTexts[_0x10b638(0x1c0)](_0x38e75a,_0x575c2f,_0x28888f);const _0x6227de=_0x3f1c1c['reduce']((_0x5e8a13,_0x567b82)=>_0x567b82[_0x10b638(0x1f6)]+_0x5e8a13,0x0),_0x41bc05=_0x3f1c1c[_0x10b638(0x29e)]((_0x4c2a1e,_0x369243)=>Math[_0x10b638(0x20b)](_0x369243[_0x10b638(0x228)],_0x4c2a1e),0x0);if(_0x6227de>_0x264d5a||_0x41bc05>_0x2cc7e7){const _0x198436=_0x264d5a/_0x6227de,_0x46e51d=_0x2cc7e7/_0x41bc05,_0x2a06d9=floorFloat(_0x516567*Math[_0x10b638(0x288)](_0x198436,_0x46e51d),0x1);_0x28888f[_0x10b638(0x27f)]=_0x2a06d9,_0x3f1c1c=VerticalTexts[_0x10b638(0x1c0)](_0x38e75a,_0x575c2f,_0x28888f);}}{if(_0x47ff3e===HorizontalAlign[_0x10b638(0x1eb)])_0x3f1c1c[_0x10b638(0x1b4)]()[_0x10b638(0x29e)]((_0x875082,_0x1d837b)=>{return _0x1d837b['textLeft']=_0x875082,_0x875082+(_0x1d837b['bodyWidth']+_0xb2f997);},_0x1dff5b);else{if(_0x47ff3e===HorizontalAlign['Center']){const _0x1bfb7c=_0x3f1c1c[_0x10b638(0x29e)]((_0x9e6d13,_0x30ee50)=>_0x30ee50['bodyWidth']+_0x9e6d13,0x0),_0x2d1696=_0x1dff5b+(_0x264d5a-_0x1bfb7c)/0x2;_0x3f1c1c[_0x10b638(0x1b4)]()[_0x10b638(0x29e)]((_0x118b24,_0x393c0a)=>{return _0x393c0a['textLeft']=_0x118b24,_0x118b24+(_0x393c0a['bodyWidth']+_0xb2f997);},_0x2d1696);}else{if(_0x47ff3e===HorizontalAlign[_0x10b638(0x234)])_0x3f1c1c[_0x10b638(0x29e)]((_0x51364e,_0x339568)=>{const _0x341186=_0x10b638;return _0x339568[_0x341186(0x1e1)]=_0x51364e-_0x339568[_0x341186(0x1f6)],_0x51364e-(_0x339568[_0x341186(0x1f6)]+_0xb2f997);},_0x1dff5b+_0xe6659c);else throw _0x10b638(0x22c)+_0x47ff3e+'\x27.';}}if(_0x53e8d6===VerticalAlign[_0x10b638(0x28f)])_0x3f1c1c['forEach'](_0x5cb1d3=>{_0x5cb1d3['textTop']=_0x219a2b;});else{if(_0x53e8d6===VerticalAlign['Middle'])_0x3f1c1c['forEach'](_0x9a9606=>{const _0x28a9ad=_0x10b638,_0xb69a4e=Math[_0x28a9ad(0x20b)](0x0,(_0x2cc7e7-_0x9a9606[_0x28a9ad(0x228)])/0x2);_0x9a9606[_0x28a9ad(0x1b9)]=_0x219a2b+_0xb69a4e;});else{if(_0x53e8d6===VerticalAlign['Bottom'])_0x3f1c1c[_0x10b638(0x276)](_0xd8cc36=>{const _0x24b2ff=_0x10b638,_0x657fab=Math['max'](0x0,_0x2cc7e7-_0xd8cc36[_0x24b2ff(0x228)]);_0xd8cc36[_0x24b2ff(0x1b9)]=_0x219a2b+_0x657fab;});else throw _0x10b638(0x213)+_0x53e8d6+'\x27.';}}}_0xa091d6[_0x10b638(0x1e3)]&&(_0x38e75a[_0x10b638(0x1ae)]=_0x10b638(0x262),_0x38e75a['fillRect'](_0x1dff5b,_0x219a2b,_0xe6659c,_0x2cc7e7),_0x38e75a['fillStyle']=_0x10b638(0x268),_0x3f1c1c[_0x10b638(0x276)](_0x34b89d=>{const _0x27f151=_0x10b638;_0x38e75a[_0x27f151(0x217)](_0x34b89d[_0x27f151(0x1e1)],_0x34b89d['textTop'],_0x34b89d[_0x27f151(0x1f6)],_0x34b89d[_0x27f151(0x228)]),console['log'](_0x28888f[_0x27f151(0x2af)],_0x34b89d[_0x27f151(0x1e0)]['map'](_0x2c64d6=>_0x2c64d6['chr'])[_0x27f151(0x23e)](''),_0x34b89d,_0x28888f);})),_0x3f1c1c[_0x10b638(0x276)](_0x524344=>{const _0x1411eb=_0x10b638;VerticalTexts['drawLine'](_0x38e75a,_0x524344[_0x1411eb(0x1e0)],_0x28888f,_0x524344[_0x1411eb(0x1e1)],_0x524344[_0x1411eb(0x1b9)]);});},_0x46df62=_0xc16375=>{const _0x29419e=_0x1db14b,_0x3f9605=_0x4a77fd,_0x1b439c=0x0,_0x4a30aa=_0xc16375[_0x29419e(0x2c7)],_0x40501b=_0xc16375[_0x29419e(0x259)],_0x4192e9=_0xc16375[_0x29419e(0x223)]??_0x29419e(0x219),_0x2f900d=_0xc16375[_0x29419e(0x231)]??'#999999',_0x231055=_0xc16375[_0x29419e(0x23d)]??_0x456f2a,_0x59f262=_0xc16375[_0x29419e(0x1bf)]??_0x21b2c8,_0x36d0ee=_0xc16375[_0x29419e(0x1bc)]??VerticalAlign['Top'],_0x225e0e=_0x1b439c+_0x59f262-Math[_0x29419e(0x24d)](_0x59627d*0x2/0x3),_0x4a1454=VerticalTexts[_0x29419e(0x21e)]['Proportional'],_0x11748e=newElem(_0x29419e(0x27b));_0x11748e[_0x29419e(0x1c2)]=_0xc16375,_0x11748e[_0x29419e(0x27a)]=_0x4a77fd*0x2,_0x11748e[_0x29419e(0x24e)]=_0x225e0e+_0x231055,_0x11748e[_0x29419e(0x1b7)]=_0x3f9605,_0x11748e[_0x29419e(0x273)]=_0x1b439c,_0x11748e[_0x29419e(0x2c9)]=(_0x1cfa23,_0x39d6e9,_0x337402)=>{const _0x3a375a=_0x29419e;_0x1cfa23[_0x3a375a(0x251)](_0x11748e,_0x39d6e9-_0x11748e['offsetX'],_0x337402-_0x11748e[_0x3a375a(0x273)]);};const _0xdec1b2=_0x11748e[_0x29419e(0x1c1)]('2d');_0xdec1b2[_0x29419e(0x1ae)]=_0x2f900d,_0xdec1b2['fillRect'](_0x3f9605-_0x4a77fd,_0x225e0e,_0x4a77fd*0x2,_0x231055),roundedRect(_0xdec1b2,_0x3f9605-_0x4a77fd+_0x59627d,_0x225e0e+_0x59627d,_0x4a77fd*0x2-_0x59627d*0x2,_0x231055-_0x59627d*0x2,_0x53330b,_0x29419e(0x253)),roundedRect(_0xdec1b2,_0x3f9605-Math[_0x29419e(0x229)](_0x85833d/0x2),_0x1b439c,_0x85833d,_0x59f262,_0x85833d,_0x29419e(0x219));{VerticalTexts[_0x29419e(0x257)]=_0x1f8a14;const _0x1ab5e1=_0x3f9605-_0x4a77fd+_0x59627d,_0x4c52fe=_0x225e0e+_0x59627d*0x2,_0x85a2b0=_0x4a77fd*0x2,_0x4710d5=_0x231055-_0x59627d*0x2,_0x4dc584=_0x13b65e*0.2,_0x1d1883=_0x1ab5e1+_0x4dc584,_0x32ba7b=_0x13b65e+_0x4dc584,_0xd4fa75=_0x1d1883+_0x32ba7b,_0x57e07c=_0x85a2b0-(_0x59627d*0x2+_0x32ba7b+_0x4dc584*0x2);_0x326e0f(_0xdec1b2,_0x40501b,{'fontSize':_0x13b65e,'areaLeft':_0x1d1883,'areaTop':_0x4c52fe,'areaWidth':_0x32ba7b,'areaHeight':_0x4710d5-_0x59627d*0x2,'hAlign':HorizontalAlign['Left'],'vAlign':VerticalAlign[_0x29419e(0x27c)],'specifiedFontType':_0x4a1454,'showDebug':_0x47c3f0}),_0x326e0f(_0xdec1b2,_0x4a30aa,{'fontSize':_0x23a50e,'areaLeft':_0xd4fa75,'areaTop':_0x4c52fe,'areaWidth':_0x57e07c,'areaHeight':_0x4710d5-_0x59627d*0x4,'hAlign':HorizontalAlign[_0x29419e(0x1b3)],'vAlign':_0x36d0ee,'specifiedFontType':_0x4a1454,'showDebug':_0x47c3f0});}return _0x11748e;};return _0x46df62;}async function initialize(_0x4da680,_0x4b4f6c){const _0x1ec3cf=_0x166f56,_0x263302=_0x4da680[_0x1ec3cf(0x1f5)][_0x1ec3cf(0x27a)],_0x535a77=_0x4da680[_0x1ec3cf(0x1f5)][_0x1ec3cf(0x24e)],_0x2fd673=document[_0x1ec3cf(0x20d)](_0x1ec3cf(0x2c4)),_0xf5beba=document[_0x1ec3cf(0x20d)](_0x1ec3cf(0x254)),_0x14f627=document[_0x1ec3cf(0x20d)](_0x1ec3cf(0x1f7)),_0x322021=_0x2fd673[_0x1ec3cf(0x1c1)]('2d'),_0x36fb51=_0xf5beba['getContext']('2d');{const _0x1f1fbe=document[_0x1ec3cf(0x20d)](_0x1ec3cf(0x1aa));_0x1f1fbe['style'][_0x1ec3cf(0x27a)]=_0x263302+'px',_0x1f1fbe[_0x1ec3cf(0x1ea)][_0x1ec3cf(0x24e)]=_0x535a77+'px',[_0x2fd673,_0xf5beba,_0x14f627]['forEach'](_0x539476=>{const _0x59c401=_0x1ec3cf;_0x539476['width']=_0x263302,_0x539476[_0x59c401(0x24e)]=_0x535a77;});const [_0x5a98a7,_0x3a10bf]=await Promise[_0x1ec3cf(0x261)]([loadSyncImage(_0x4da680[_0x1ec3cf(0x1f5)][_0x1ec3cf(0x2a5)]),loadSyncImage(_0x4da680[_0x1ec3cf(0x1f5)][_0x1ec3cf(0x2bb)])]);_0x322021[_0x1ec3cf(0x26f)](),_0x322021[_0x1ec3cf(0x2d6)]=_0x4da680[_0x1ec3cf(0x1f5)][_0x1ec3cf(0x20a)],_0x322021['drawImage'](_0x5a98a7,0x0,0x0,_0x263302,_0x535a77),_0x322021['restore'](),_0x322021[_0x1ec3cf(0x251)](_0x3a10bf,0x0,0x0,_0x263302,_0x535a77);}const _0xb91405=_0x4da680[_0x1ec3cf(0x289)][_0x1ec3cf(0x283)]??{'L':0x190,'M':0x140,'S':0xf0},_0x481cf0=_0x4da680[_0x1ec3cf(0x289)]['strapLengthType']??{'L':0x40,'M':0x40,'S':0x30},_0x547c8d=generateDrawTanzaku({'cardHalfWidth':_0x4da680['cardSettings'][_0x1ec3cf(0x1df)],'defaultCardHeight':_0xb91405['M'],'defaultStrapLength':_0x481cf0['M'],'borderWidth':_0x4da680[_0x1ec3cf(0x289)][_0x1ec3cf(0x264)],'textFontSize':_0x4da680['cardSettings'][_0x1ec3cf(0x252)],'nameFontSize':_0x4da680[_0x1ec3cf(0x289)][_0x1ec3cf(0x230)],'debugLetter':_0x4da680[_0x1ec3cf(0x289)][_0x1ec3cf(0x1ef)],'debugLine':_0x4da680['cardSettings'][_0x1ec3cf(0x2b9)]}),_0x43d328=_0x4b4f6c[_0x1ec3cf(0x294)](_0x2fee88=>{const _0x1c6693=_0x1ec3cf,_0x28bd11=Object[_0x1c6693(0x2c2)]({},_0x2fee88,{'cardHeight':_0xb91405[_0x2fee88[_0x1c6693(0x2ca)]],'strapLength':_0x481cf0[_0x2fee88['cardSize']],'textVAlign':VerticalAlign[_0x2fee88[_0x1c6693(0x1bc)]]});return _0x547c8d(_0x28bd11);});_0x43d328[_0x1ec3cf(0x276)](_0x7ff502=>_0x7ff502[_0x1ec3cf(0x2c9)](_0x36fb51,_0x7ff502[_0x1ec3cf(0x1c2)]['x'],_0x7ff502[_0x1ec3cf(0x1c2)]['y']));const _0x2bf50f=(()=>{const _0x626bb2=_0x1ec3cf,_0x202a90=()=>_0x36fb51[_0x626bb2(0x297)](0x0,0x0,_0xf5beba[_0x626bb2(0x27a)],_0xf5beba[_0x626bb2(0x24e)]),_0x1d2db7=_0x56062e=>{_0x43d328['forEach'](_0xfb90ab=>{const _0xbb3a72=_0x1c4a;_0x36fb51[_0xbb3a72(0x26f)](),_0x36fb51[_0xbb3a72(0x293)](_0xfb90ab[_0xbb3a72(0x29b)],_0xfb90ab['trnY']),_0x36fb51[_0xbb3a72(0x1a7)](_0x56062e),_0x36fb51['drawImage'](_0xfb90ab,_0xfb90ab['rotX'],_0xfb90ab['rotY']),_0x36fb51['restore']();});};let _0xa8a04;return()=>{const _0x4961dc=_0x626bb2;_0x43d328['forEach'](_0x48f0d6=>{const _0x3c94e5=_0x1c4a;_0x48f0d6['x']=_0x48f0d6[_0x3c94e5(0x1c2)]['x']-_0x48f0d6[_0x3c94e5(0x1b7)],_0x48f0d6['y']=_0x48f0d6[_0x3c94e5(0x1c2)]['y']-_0x48f0d6['offsetY'],_0x48f0d6[_0x3c94e5(0x29b)]=_0x48f0d6[_0x3c94e5(0x1c2)]['x'],_0x48f0d6[_0x3c94e5(0x1a4)]=_0x48f0d6['params']['y'],_0x48f0d6[_0x3c94e5(0x2c5)]=-_0x48f0d6[_0x3c94e5(0x1b7)],_0x48f0d6[_0x3c94e5(0x27d)]=-_0x48f0d6[_0x3c94e5(0x273)];});const _0x148502=_0x4da680[_0x4961dc(0x1db)][_0x4961dc(0x1b0)](),_0x106379=()=>{const _0x11f5ac=_0x4961dc,_0x28ef23=_0x148502[_0x11f5ac(0x2aa)]();_0x28ef23!==null&&(_0x202a90(),_0x1d2db7(_0x28ef23));};_0x106379(),_0xa8a04&&(clearInterval(_0xa8a04),_0xa8a04=null),_0xa8a04=setInterval(_0x106379,_0x4da680[_0x4961dc(0x1db)][_0x4961dc(0x1be)]);};})();{const _0x3e8e1b=_0x14f627['getContext']('2d'),_0x4fe294=document[_0x1ec3cf(0x20d)](_0x1ec3cf(0x1e4)),_0x562eec=document['querySelector'](_0x1ec3cf(0x279)),_0x25a6ce=document[_0x1ec3cf(0x20d)](_0x1ec3cf(0x22f)),_0x247c98=document[_0x1ec3cf(0x20d)]('#tanzaku-text'),_0x103be5=document[_0x1ec3cf(0x20d)](_0x1ec3cf(0x224)),_0x435e17=document[_0x1ec3cf(0x20d)](_0x1ec3cf(0x1b8)),_0x16bc53=document['querySelector'](_0x1ec3cf(0x266)),_0x19c41e=document[_0x1ec3cf(0x20d)](_0x1ec3cf(0x1cb)),_0x35de3d=document[_0x1ec3cf(0x20d)](_0x1ec3cf(0x2b5)),_0xbb71ce=document['querySelector']('#draw'),_0x1f9f55=()=>{const _0x29967e=_0x1ec3cf;_0xbb71ce[_0x29967e(0x2a4)](_0x29967e(0x225));},_0x23a9b3=()=>{const _0x20b035=_0x1ec3cf;_0xbb71ce[_0x20b035(0x1cc)](_0x20b035(0x225),_0x20b035(0x225));},_0xf81707=_0x39ad45=>{const _0x1cd833=_0x1ec3cf;_0x35de3d[_0x1cd833(0x241)]=_0x39ad45,_0x35de3d['style'][_0x1cd833(0x245)]=_0x1cd833(0x1c9);},_0x42130d=()=>{const _0x2607a2=_0x1ec3cf;_0x35de3d[_0x2607a2(0x241)]='',_0x35de3d[_0x2607a2(0x1ea)][_0x2607a2(0x245)]=_0x2607a2(0x1f3);};{_0x23a9b3(),_0x42130d();const _0x2a692a=(_0x244b7f,_0x375b60)=>{const _0x2158df=_0x1ec3cf;_0x244b7f[_0x2158df(0x2d5)][_0x2158df(0x28e)](newElem(_0x2158df(0x1c4),[_0x375b60],[_0x2158df(0x2b7)],{'style':_0x2158df(0x1d6)}),_0x244b7f[_0x2158df(0x201)]);};_0x4fe294[_0x1ec3cf(0x1e9)]=_0x4da680['defaultValues']['positionX']??0x0,_0x562eec[_0x1ec3cf(0x1e9)]=_0x4da680[_0x1ec3cf(0x2c6)][_0x1ec3cf(0x23f)]??0x0,_0x4fe294['setAttribute'](_0x1ec3cf(0x20b),_0x263302),_0x562eec[_0x1ec3cf(0x1cc)](_0x1ec3cf(0x20b),_0x535a77),[_0x4fe294,_0x562eec]['forEach'](_0x594e0a=>{const _0x4823eb=_0x1ec3cf;_0x2a692a(_0x594e0a,_0x4823eb(0x2bc));}),_0x25a6ce['value']=_0x4da680['defaultValues']['tanzakuName']??'',_0x25a6ce['setAttribute']('placeholder','ななし');const _0x3ca998='縦書きの文書。複数行書けます。\x0a英数文字はいわゆる半角ではなく全角が望ましいです。\x0a書きすぎると文字が小さくなるので注意';_0x247c98[_0x1ec3cf(0x1e9)]=_0x4da680[_0x1ec3cf(0x2c6)][_0x1ec3cf(0x2da)]??'',_0x247c98[_0x1ec3cf(0x1cc)](_0x1ec3cf(0x26e),_0x3ca998),_0x2a692a(_0x247c98,_0x3ca998),_0x25a6ce[_0x1ec3cf(0x1a5)](_0x1ec3cf(0x287),_0x23a9b3),_0x247c98['addEventListener']('change',_0x23a9b3),(_0x435e17[_0x1ec3cf(0x20d)](_0x1ec3cf(0x284)+_0x4da680[_0x1ec3cf(0x2c6)][_0x1ec3cf(0x2ca)]+'\x22]')??_0x435e17[_0x1ec3cf(0x20d)](_0x1ec3cf(0x221)))[_0x1ec3cf(0x272)]=!![],(_0x16bc53[_0x1ec3cf(0x20d)]('[name=\x22text-vertical-align\x22][value=\x22'+_0x4da680['defaultValues'][_0x1ec3cf(0x1bc)]+'\x22]')??_0x16bc53[_0x1ec3cf(0x20d)](_0x1ec3cf(0x29c)))[_0x1ec3cf(0x272)]=!![],_0x19c41e[_0x1ec3cf(0x1e9)]=_0x4da680[_0x1ec3cf(0x2c6)]['borderColor']??_0x1ec3cf(0x238),_0x35de3d[_0x1ec3cf(0x241)]='';}{let _0x243df6;const _0x50aeee=()=>{const _0x5041ec=_0x1ec3cf,_0x576788=parseInt(_0x4fe294[_0x5041ec(0x1e9)],0xa),_0x7832f8=parseInt(_0x562eec[_0x5041ec(0x1e9)],0xa),_0x4ec9bf=_0x25a6ce[_0x5041ec(0x1e9)],_0x3e7a3e=_0x247c98['value'];if(!(0x0<=_0x576788&&_0x576788<=_0x263302))return _0xf81707(_0x5041ec(0x265)),null;if(!(0x0<=_0x7832f8&&_0x7832f8<=_0x535a77))return _0xf81707('y座標が範囲外です'),null;if(!_0x4ec9bf)return _0xf81707('名前が空です'),null;if(!_0x3e7a3e)return _0xf81707('願い事が空です'),null;const _0x3832fd=_0x435e17[_0x5041ec(0x20d)](_0x5041ec(0x216))[_0x5041ec(0x1e9)],_0x35b219=_0x16bc53[_0x5041ec(0x20d)](_0x5041ec(0x208))[_0x5041ec(0x1e9)];return{'x':_0x576788,'y':_0x7832f8,'name':_0x4ec9bf,'text':_0x3e7a3e,'cardSize':_0x3832fd,'cardHeight':_0xb91405[_0x3832fd],'strapRate':_0x481cf0[_0x3832fd],'textVAlign':VerticalAlign[_0x35b219],'borderColor':_0x19c41e[_0x5041ec(0x1e9)]};},_0x634c0=_0x121fd0=>{const _0x588ca0=_0x1ec3cf,_0x3668c2=parseInt(_0x121fd0[_0x588ca0(0x1b7)],0xa),_0x114fb3=parseInt(_0x121fd0['offsetY'],0xa);0x0<=_0x3668c2&&_0x3668c2<=_0x263302&&(_0x4fe294[_0x588ca0(0x1e9)]=_0x3668c2),0x0<=_0x114fb3&&_0x114fb3<=_0x535a77&&(_0x562eec[_0x588ca0(0x1e9)]=_0x114fb3),_0x243df6&&(_0x3e8e1b[_0x588ca0(0x297)](0x0,0x0,_0x14f627['width'],_0x14f627[_0x588ca0(0x24e)]),Object[_0x588ca0(0x2c2)](_0x243df6,{'x':_0x3668c2,'y':_0x114fb3}),_0x547c8d(_0x243df6)['drawThisTo'](_0x3e8e1b,_0x243df6['x'],_0x243df6['y']));};_0x14f627[_0x1ec3cf(0x1a5)](_0x1ec3cf(0x2d0),_0x634c0),_0x103be5[_0x1ec3cf(0x1a5)](_0x1ec3cf(0x2d0),()=>{const _0x3b0f9f=_0x1ec3cf;_0x3e8e1b[_0x3b0f9f(0x297)](0x0,0x0,_0x14f627['width'],_0x14f627[_0x3b0f9f(0x24e)]),_0x23a9b3(),_0x243df6=_0x50aeee();if(!_0x243df6)return;_0x42130d(),_0x547c8d(_0x243df6)['drawThisTo'](_0x3e8e1b,_0x243df6['x'],_0x243df6['y']),_0x1f9f55();}),_0xbb71ce[_0x1ec3cf(0x1a5)](_0x1ec3cf(0x2d0),async()=>{const _0x5cc741=_0x1ec3cf,_0x305040=await showConfirmDialog(newElem(_0x5cc741(0x1c4),[newElem(_0x5cc741(0x1e2),[newElem('tr',[newElem('th',['名前']),newElem('td',[_0x243df6[_0x5cc741(0x259)]])]),newElem('tr',[newElem('th',['本文']),newElem('td',[_0x243df6[_0x5cc741(0x2c7)]],[],{'style':_0x5cc741(0x1d6)})])],[],{'border':'1'}),newElem('p',[['以上の内容で確定してよろしいですか？','',_0x5cc741(0x2d2),_0x5cc741(0x299)][_0x5cc741(0x23e)]('\x0a'),_0x4da680[_0x5cc741(0x1b1)][_0x5cc741(0x25e)]?_0x5cc741(0x226):''],[],{'style':'white-space:pre-line;'})]),{'defaultIsYes':![]});if(_0x305040){const _0x3e3eb2={'method':_0x5cc741(0x2ad),'tanzaku':Object['assign']({},_0x243df6,{'canvasW':_0x4da680[_0x5cc741(0x1f5)][_0x5cc741(0x27a)],'canvasH':_0x4da680['canvasSettings'][_0x5cc741(0x24e)],'text':_0x243df6[_0x5cc741(0x2c7)][_0x5cc741(0x204)](/\n/g,'\x5cn')})};await postNewTanzaku(_0x4da680,_0x3e3eb2),[_0x103be5,_0xbb71ce]['forEach'](_0x38f4a2=>_0x38f4a2[_0x5cc741(0x1ea)][_0x5cc741(0x245)]=_0x5cc741(0x1f3)),_0x14f627[_0x5cc741(0x29d)](_0x5cc741(0x2d0),_0x634c0),_0x3e8e1b[_0x5cc741(0x297)](0x0,0x0,_0x14f627[_0x5cc741(0x27a)],_0x14f627['height']),_0x43d328[_0x5cc741(0x2cd)](_0x547c8d(_0x243df6)),_0x2bf50f();}});}_0x2bf50f();}}async function postNewTanzaku(_0x1f2c4e,_0x4c197d){const _0x58d71f=_0x166f56;_0x1f2c4e[_0x58d71f(0x1b1)][_0x58d71f(0x278)]&&console['log'](_0x58d71f(0x26d),_0x4c197d);const _0x5a29f6=_0x1f2c4e['tanzakuSettings']['postDummy']?{'ok':undefined,'type':_0x58d71f(0x25c),'status':0x0}:await fetch(_0x1f2c4e['tanzakuSettings'][_0x58d71f(0x1ff)],{'method':_0x58d71f(0x1ac),'mode':_0x58d71f(0x24a),'headers':{'Content-Type':_0x58d71f(0x280)},'body':JSON[_0x58d71f(0x277)](_0x4c197d)});_0x1f2c4e[_0x58d71f(0x1b1)]['debug']&&console['log'](_0x58d71f(0x207),_0x5a29f6);}async function getEveryonesTanzaku(_0x32b7b2){const _0x42323d=_0x166f56;return(!_0x32b7b2['tanzakuSettings'][_0x42323d(0x1f1)]?fetch(_0x32b7b2[_0x42323d(0x1b1)][_0x42323d(0x1ff)],{})['then'](_0x13fca1=>_0x13fca1[_0x42323d(0x1fd)]()):Promise['resolve']([{'x':0x64,'y':-0x5,'cardSize':'L','textVAlign':_0x42323d(0x210),'borderColor':_0x42323d(0x285),'name':_0x42323d(0x20c),'text':_0x42323d(0x209)},{'x':0x154,'y':-0x5,'cardSize':'L','textVAlign':_0x42323d(0x210),'borderColor':_0x42323d(0x20f),'name':'ななし2','text':'あｉｉピ「国ト国』っャてー～も（）Ａｌｐｈａ？'},{'x':0x1f4,'y':-0x5,'cardSize':'M','textVAlign':_0x42323d(0x28f),'borderColor':'#773322','name':_0x42323d(0x2b8),'text':'あ、。お――え：；い…'},{'x':0x2bc,'y':-0x5,'cardSize':'S','textVAlign':_0x42323d(0x27c),'borderColor':_0x42323d(0x1ee),'name':_0x42323d(0x2c1),'text':_0x42323d(0x1dd)},{'x':0x334,'y':0x127,'cardSize':'L','textVAlign':'Center','borderColor':_0x42323d(0x1fe),'name':'tarou','text':_0x42323d(0x1e7)},{'x':0xea,'y':0xf2,'cardSize':'S','textVAlign':'Middle','borderColor':_0x42323d(0x1fb),'name':_0x42323d(0x1d9),'text':_0x42323d(0x1e5)},{'x':0x258,'y':0x144,'cardSize':'M','textVAlign':'Bottom','borderColor':'#cccccc','name':_0x42323d(0x200),'text':_0x42323d(0x244)},{'x':0x14e,'y':0x1e5,'cardSize':'L','textVAlign':_0x42323d(0x28f),'borderColor':_0x42323d(0x23c),'name':'PECMM','text':_0x42323d(0x1ca)},{'x':0x64,'y':0x64,'cardSize':'L','textVAlign':_0x42323d(0x28f),'borderColor':_0x42323d(0x23b),'name':_0x42323d(0x2bd),'text':_0x42323d(0x23a)}]))[_0x42323d(0x246)](_0x1577ef=>_0x1577ef[_0x42323d(0x24b)](-_0x32b7b2['tanzakuSettings'][_0x42323d(0x218)])['map'](_0x2fe17b=>{const _0x56cdc2=_0x42323d;return _0x2fe17b[_0x56cdc2(0x2c7)]=_0x2fe17b[_0x56cdc2(0x2c7)][_0x56cdc2(0x204)](/\\n/g,'\x0a'),_0x2fe17b;}));}(async _0x3ed265=>{const _0x14885e=_0x166f56;{_0x3ed265['pageOptions'][_0x14885e(0x222)]&&(document[_0x14885e(0x222)]=_0x3ed265[_0x14885e(0x1d0)][_0x14885e(0x222)]),_0x3ed265[_0x14885e(0x1d0)][_0x14885e(0x28b)]&&document[_0x14885e(0x20d)](_0x14885e(0x275))[_0x14885e(0x205)]('afterbegin',_0x3ed265[_0x14885e(0x1d0)]['referenceHTML']);}const _0x1a9b7e=document[_0x14885e(0x20d)](_0x14885e(0x2d1)),_0x5d5b6d=document['querySelector'](_0x14885e(0x1aa));try{_0x5d5b6d[_0x14885e(0x1ea)]['display']='none';const [_0x2fb050,_0x5b058d]=await Promise[_0x14885e(0x261)]([getEveryonesTanzaku(_0x3ed265),document[_0x14885e(0x239)][_0x14885e(0x1af)](_0x14885e(0x1c5))]);_0x3ed265[_0x14885e(0x1b1)]['debug']&&console[_0x14885e(0x2b4)](_0x14885e(0x2cc),_0x2fb050),_0x1a9b7e[_0x14885e(0x2d5)][_0x14885e(0x232)](_0x1a9b7e),_0x5d5b6d[_0x14885e(0x1ea)][_0x14885e(0x245)]=_0x14885e(0x1cf),await initialize(_0x3ed265,_0x2fb050);}catch(_0x4bd923){_0x5d5b6d['parentElement']['insertBefore'](newElem('p',[_0x14885e(0x1b6)],[],{'style':_0x14885e(0x1e8)}),_0x5d5b6d);throw _0x4bd923;}})(getInitValues());
    
    // 縦書き参考：https://qiita.com/you_fuzuki/items/c444a2d6d6be94fa8419
    
    
    function getInitValues() {
      // tanzaku animation 定義
      const getTanzakuSwayAndStopAngleTimeline = () => {
        const baseAngleTimelines = [
          [
              Math.PI * 0.0 / 180,
            - Math.PI * 1.0 / 180,
            - Math.PI * 2.0 / 180,
            - Math.PI * 4.0 / 180,
            - Math.PI * 5.0 / 180,
            - Math.PI * 4.0 / 180,
            - Math.PI * 2.0 / 180,
              Math.PI * 0.0 / 180,
              Math.PI * 1.8 / 180,
              Math.PI * 3.4 / 180,
              Math.PI * 4.2 / 180,
              Math.PI * 3.6 / 180,
              Math.PI * 2.6 / 180,
              Math.PI * 1.2 / 180,
            - Math.PI * 0.4 / 180,
            - Math.PI * 1.2 / 180,
            - Math.PI * 2.0 / 180,
            - Math.PI * 2.6 / 180,
            - Math.PI * 2.0 / 180,
            - Math.PI * 1.2 / 180,
            - Math.PI * 0.5 / 180,
              Math.PI * 0.0 / 180,
              Math.PI * 0.3 / 180,
              Math.PI * 0.6 / 180,
              Math.PI * 0.8 / 180,
              Math.PI * 0.6 / 180,
              Math.PI * 0.3 / 180,
            - Math.PI * 0.0 / 180,
            - Math.PI * 0.2 / 180,
            - Math.PI * 0.4 / 180,
            - Math.PI * 0.5 / 180,
            - Math.PI * 0.4 / 180,
            - Math.PI * 0.3 / 180,
            - Math.PI * 0.2 / 180,
            - Math.PI * 0.1 / 180,
            - Math.PI * 0.0 / 180,
          ], [
              Math.PI * 0.0 / 180,
              Math.PI * 1.8 / 180,
              Math.PI * 3.4 / 180,
              Math.PI * 4.2 / 180,
              Math.PI * 3.6 / 180,
              Math.PI * 2.6 / 180,
              Math.PI * 1.2 / 180,
            - Math.PI * 0.4 / 180,
            - Math.PI * 1.2 / 180,
            - Math.PI * 2.0 / 180,
            - Math.PI * 2.6 / 180,
            - Math.PI * 2.0 / 180,
            - Math.PI * 1.2 / 180,
            - Math.PI * 0.5 / 180,
              Math.PI * 0.0 / 180,
              Math.PI * 0.3 / 180,
              Math.PI * 0.6 / 180,
              Math.PI * 0.8 / 180,
              Math.PI * 0.6 / 180,
              Math.PI * 0.3 / 180,
            - Math.PI * 0.0 / 180,
            - Math.PI * 0.2 / 180,
            - Math.PI * 0.4 / 180,
            - Math.PI * 0.5 / 180,
            - Math.PI * 0.4 / 180,
            - Math.PI * 0.2 / 180,
              Math.PI * 0.0 / 180,
              Math.PI * 0.2 / 180,
              Math.PI * 0.4 / 180,
              Math.PI * 0.3 / 180,
              Math.PI * 0.2 / 180,
              Math.PI * 0.1 / 180,
              Math.PI * 0.0 / 180,
          ], [
              Math.PI * 0.0 / 180,
              Math.PI * 0.3 / 180,
              Math.PI * 0.6 / 180,
              Math.PI * 0.8 / 180,
              Math.PI * 0.6 / 180,
              Math.PI * 0.3 / 180,
            - Math.PI * 0.0 / 180,
            - Math.PI * 0.2 / 180,
            - Math.PI * 0.4 / 180,
            - Math.PI * 0.5 / 180,
            - Math.PI * 0.4 / 180,
            - Math.PI * 0.3 / 180,
            - Math.PI * 0.2 / 180,
            - Math.PI * 0.1 / 180,
            - Math.PI * 0.0 / 180,
          ],
        ];
        
        let timeline = [];
        let currentIndex = 0;
        const next = () => {
          if (currentIndex === timeline.length) {
            currentIndex = 0;
            const motionIndex = randRangedInt(0, baseAngleTimelines.length);
            const stoppingMotions = Array.from({length:randRangedInt(10, 80)}); // 10～90フレーム静止
            timeline = baseAngleTimelines[motionIndex].concat(stoppingMotions); // 風で揺れる → 静止 → ……を繰り返す
          }
          return timeline[currentIndex++];
        };
        return {
          next: next,
        };
      };
      
      
      return {
        // ページの構成
        pageOptions: {
          title        : '七夕 月野笹ちろる飾り🌙🌲短冊',
          referenceHTML: [
            `<a href='https://twitter.com/tirol0_0lorit'>月野木ちろる🌙🌲</a>`,
          ].join('<br />'),
        },
        
        tanzakuSettings: {
          url: 'https://script.google.com/macros/s/AKfycbwfpQU1MZ62G9XERHUeF8ALYVFvLQssy_9JZj0YlCYgbhWGWGotH6KAfji0MLx95yZU/exec',
          maxCount: 8,
          getDummy : false,
          postDummy: false,
          debug: false,
        },
        
        canvasSettings: {
          width : 960,
          height: 960,
          treeImagePath: 'img/tirol.png',
          
          backgroundImageFilter: 'blur(10px) contrast(1.1) opacity(0.12)',
          backgroundImagePath: 'img/amanogawa.png',
        },
        cardSettings: {
          cardHalfWidth   : 42,
          cardBorderWidth :  8,
          cardTextFontSize: 28,
          cardNameFontSize: 14,
          cardHeightType: {
            L : 400,
            M : 320,
            S : 240,
          },
          strapLengthType: {
            L : 60,
            M : 60,
            S : 40,
          },
          debugLine  : false,
          debugLetter: false,
        },
        
        animationSettings: {
          getAngleTimeline: getTanzakuSwayAndStopAngleTimeline,
          motionIntervalMS: 100,
        },
        
        defaultValues: {
          positionX : 480,
          positionY : 480,
          cardSize  : 'M',
          textVAlign: 'Middle',
          borderColor  : '#FFCCFF',
          tanzakuName: '',
          tanzakuText: [].join('\n'),
        },
      };
    }
  </script>
</body>
</html>
