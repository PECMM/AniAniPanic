<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="twitter:card" content="summary_large_image">
  <meta property="og:title" content="774チャート">
  <meta property="og:url"   content="https://pecmm.github.io/chart774/chart774.html" />
  <meta property="og:image" content="https://pecmm.github.io/chart774/thumb/thumb.png?eba9e701">
  <title>774チャート</title>
  <style>
    body {
      padding: 0 0 2em 0;
      margin: 0;
    }
    button#toImage {
      font-size: 1.2em;
      position: absolute;
      bottom: 10px;
      right: 10px;
      z-index: 3;
      user-select: none;
      -moz-user-select: none;
      -webkit-user-select: none;
    }
    button#toggleDescButton {
      font-size: 1.2em;
      position: absolute;
      bottom: 10px;
      left: 10px;
      z-index: 3;
      user-select: none;
      -moz-user-select: none;
      -webkit-user-select: none;
    }
    
    #before th {
      text-align: right;
    }
    #before table {
      margin-bottom: 1em;
    }
    #before button {
      font-size: 1.2em;
    }
    
    div#before {
    }
    div#main {
      display: none;
    }
    div#after {
      display: none;
    }
    footer {
      font-size: 9pt;
      position: fixed;
      width: 94%;
      bottom: 0px;
      margin: 0px;
      padding: 0px;
      border: 0px;
      z-index: 99;
      background-color: #CCCCCC;
      user-select: none;
      -moz-user-select: none;
      -webkit-user-select: none;
    }
  </style>
</head>
<script src="pixi-legacy.min.js"></script>
<script>
  // 共通機能
  function loadSyncImage(src) {
    return new Promise((resolve, reject) => {
      let img = new Image();
      img.onload = () => resolve(img);
      img.onerror = (e) => reject(e);
      img.src = src;
    });
  }
  function getInnerValue(value, min, max) {
    if (value < min)
      return min;
    if (value > max)
      return max;
    return value;
  }
  function padString(len, v) {
    return v.toString().padStart(len, '0');
  }
  function getDateStringForFile(t) {
    return `${t.getFullYear()}${padString(2, t.getMonth() + 1)}${padString(2, t.getDate())}-${padString(2, t.getHours())}${padString(2, t.getMinutes())}${padString(2, t.getSeconds())}`;
  }
</script>

<body>
  <div id='main'>
    <button id="toggleDescButton"></button>
    <button id="toImage">画像に変換して保存</button>
  </div>
  <div id='before'>
    <h1>そやさんがやってた774incのメンバーをチャート分け</h1>
    <form id="input-values">
      <table cellpadding="2" border="1">
        <tr>
          <th>軸：</th>
          <td>
            <select id="background-selector">
              <option value="01.png">キャラクター</option>
              <option value="02.png">映画での配役</option>
              <option value="usertext">(好きなテキスト)</option>
              <option value="userimage">(好きな画像を使用)</option>
            </select>
            <div id="userimage-div" style="display:none;">
              <input type="file" accept="image/*" id="userimage-input" />
            </div>
            <div id="usertext-div" style="display:none;">
              タイトル： <input type="text" id="usertext-title" size="12" value="映画での配役★"> <br>
                    左： <input type="text" id="usertext-left"  size="12" value="主人公・味方">
                    右：<input type="text" id="usertext-right"  size="12" value="黒幕・適役"  > <br>
                    上： <input type="text" id="usertext-top"   size="12" value="最初の犠牲者">
                    下：<input type="text" id="usertext-bottom" size="12" value="最後まで生存">
            </div>
          </td>
        </tr>
        <tr>
          <th rowspan="3">人：</th>
          <td>
            <label><input name="icon" type="checkbox" checked value="icon-a1.png" />因幡はねる</label>
            <label><input name="icon" type="checkbox" checked value="icon-a2.png" />宗谷いちか</label>
            <label><input name="icon" type="checkbox" checked value="icon-a3.png" />日ノ隈らん</label>
        <!--<label><input name="icon" type="checkbox" checked value="icon-a4.png" />宇森ひなこ</label>-->
          </td>
        </tr>
        <tr>
          <td>
            <label><input name="icon" type="checkbox" checked value="icon-h1.png" />西園寺メアリ</label>
            <label><input name="icon" type="checkbox" checked value="icon-h2.png" />島村シャルロット</label>
            <label><input name="icon" type="checkbox" checked value="icon-h3.png" />周防パトラ</label>
            <label><input name="icon" type="checkbox" checked value="icon-h4.png" />堰代ミコ</label>
        <!--<label><input name="icon" type="checkbox" checked value="icon-h5.png" />蒼月エリ</label>-->
          </td>
        </tr>
        <tr>
          <td>
            <label><input name="icon" type="checkbox" checked value="icon-v1.png" />杏戸ゆげ</label>
            <label><input name="icon" type="checkbox" checked value="icon-v2.png" />鴨見カモミ</label>
            <label><input name="icon" type="checkbox" checked value="icon-v3.png" />花奏かのん</label>
            <label><input name="icon" type="checkbox" checked value="icon-v4.png" />季咲あんこ</label>
          </td>
        </tr>
        <tr>
        </tr>
        <tr>
          <th>説明文のfontSize</th>
          <td><input id="fontSizeInput" type="text" size="4" value="18">pt</td>
        </tr>
      </table>
    </form>
    <button id="start">編集開始</button>
    
    <hr />
    <div>
      <textarea cols=120 rows=8 id="loadingObject"></textarea>
      <br />
      <button id="loadPastResult">JSONで以前の結果を復元</button> <span style="color:red" id="errorForLoadPastResult"></span>
    </div>
    
    <hr />
    <div>version: <span id="version"></span></div>
    <div id="help">
      <ul>
        <li>以下で動作確認済み
          <ul>
            <li>Windows Chrome</li>
            <li>Windows Firefox</li>
            <li>Android Chrome</li>
          </ul>
        </li>
        <li>保存する画像はブラウザの表示サイズに依存すると思われるので、適宜調節してください。<br />(スマホは横向き推奨)</li>
        <li>ブラウザの拡大率100%でないと表示がおかしくなります(多分)。</li>
        <li>画面遷移や操作結果の送信はしないので、戻る時は画面リロードしてください。<br>最終画面の結果を保存しない限り、復元はできません。</li>
        <li>編集操作
          <ul>
            <li>右側のアイコンをクリックすると、チャート内へのアイコンの追加または最前列化されます。</li>
            <li>チャート内のアイコンをドラッグドロップで移動できます。</li>
            <li>画面右側(アイコンの隣)に説明文を編集できます。</li>
            <li>「画像に変換して保存」で、編集結果の画像および編集途中データ(JSONテキスト)を取得できます。<br />(※編集途中データは実装変更により再利用できなくなる場合があります)</li>
          </ul>
        </li>
      </ul>
    </div>
    
    <footer>
      元ネタ：
      <a href="https://twitter.com/Ichika_Souya">宗谷いちか様</a>
      <br>
      <a href="https://www.youtube.com/watch?v=DHyxPK-vPZk">【※あくまで個人の感想です】774incのメンバーをチャート分け！！</a>
    </footer>
  </div>
  
  <div id="workDiv" style="display:none"><canvas></canvas><img></img></div>
  
  <div id='after'>
    <p>画像を右クリックなどで保存してください。</p>
    <p>やり直す場合は画面リロードしてください。</p>
    <a><img id="resultImg" /></a>
    <br />
    <textarea cols=120 rows=8 id="resultObj" readonly></textarea>
  </div>
  
  <script>
const _0x51a3=['replace','block','#userimage-div','canvas','説明文を表示する','contextmenu','onerror','div#workDiv','#usertext-right','#errorForLoadPastResult','download','onload','#chartCanvas','left','BaseTexture','#usertext-div','data','fontSize','Sprite','save','#usertext-left','1.1.0','mouseup','length','querySelectorAll','text','get','#loadingObject','url','setItem','visible','charts','push','説明文','appendChild','anchor','display','minX','Texture','touchendoutside','div#before','footer','usertext','set','renderer','addEventListener','removeChild','drawImage','getContext','Container','innerHeight','Application','innerWidth','toImage','div#main','#resultImg','none','removeAttribute','style','baseWidth','values','minY','parent','#resultObj','width','greyscale','descTextIsDisplay','「好きな画像を使用」にして画像ファイルを選択してください','touchend','Text','scale','map','resource','interactive','mousemove','change','pos','click','absolute','textIcon','00.png','baseHeight','addChartIcon','height','disabled','localStorage','setAttribute','haikeiFilename','readAsDataURL','sans-serif','desc','value','top','from','#toggleDescButton','title','#usertext-top','entries','icon','textContent','img','buttonMode','button#start','resize','stringify','div#after','src','message','bold','#input-values\x20input[name=\x22icon\x22]:checked','lastSave','target','max','説明文を非表示にする','#usertext-title','parse','#input-values\x20select#background-selector','view','maxY','filters','unload','maxX','toDataURL','exportSizeX','baseTexture','0px','log','index','addChild','name','position','sqrt','#userimage-input','min','preventDefault','mousedown','axisLabels','#fontSizeInput','pointertap','remove','querySelector','userimage','dragging','getElementById','exportSizeY','userimageImg','status','stage','chart-','touchstart','error'];(function(_0x10baf9,_0x606b94){const _0x47a85c=function(_0x4e7642){while(--_0x4e7642){_0x10baf9['push'](_0x10baf9['shift']());}};_0x47a85c(++_0x606b94);}(_0x51a3,0xfc));const _0x22f3=function(_0x10baf9,_0x606b94){_0x10baf9=_0x10baf9-0x0;let _0x47a85c=_0x51a3[_0x10baf9];return _0x47a85c;};const AppVersion=_0x22f3('0x47');document[_0x22f3('0x27')]('#version')['textContent']=AppVersion;const world={'charts':new Map(),'fontSize':-0x1,'descTextIsDisplay':undefined};world[_0x22f3('0x45')]=function(){return{'version':AppVersion,'status':Array[_0x22f3('0x8f')](world[_0x22f3('0x51')][_0x22f3('0x93')]())['map'](_0x2c4e33=>{let _0x109d86=_0x2c4e33[0x1];let _0x402388=!_0x109d86[_0x22f3('0x2d')]?null:{'x':_0x109d86[_0x22f3('0x94')]['x'],'y':_0x109d86['icon']['y']};return{'index':_0x2c4e33[0x0],'name':_0x109d86[_0x22f3('0x81')]['_texture'][_0x22f3('0x17')][_0x22f3('0x7a')][_0x22f3('0x4e')][_0x22f3('0x32')](/.+\//,''),'desc':_0x109d86['text'][_0x22f3('0x4b')],'pos':_0x402388};}),'haikeiFilename':world[_0x22f3('0x89')],'fontSize':world[_0x22f3('0x43')],'axisLabels':world['axisLabels']};};function save(){let _0x2d54a7=world[_0x22f3('0x45')]();console['log'](JSON[_0x22f3('0x3')](_0x2d54a7,null,null));console[_0x22f3('0x19')](_0x2d54a7);}function loadFromObj(_0x3f0c69,_0x37efe4){let _0x3931c2=_0x3f0c69[_0x22f3('0x2d')]['map'](_0x549b01=>_0x549b01[_0x22f3('0x1c')]);init({'haikeiFilename':_0x3f0c69[_0x22f3('0x89')],'iconFilenames':_0x3931c2,'fontSize':_0x3f0c69['fontSize'],'userimageImg':_0x37efe4,'status':_0x3f0c69[_0x22f3('0x2d')],'axisLabels':_0x3f0c69[_0x22f3('0x23')]});}async function init(_0x42b4c6){if(window['localStorage']){window[_0x22f3('0x5f')](_0x22f3('0x13'),_0x133be4=>{window['localStorage'][_0x22f3('0x4f')](_0x22f3('0x9'),JSON[_0x22f3('0x3')](world[_0x22f3('0x45')]()));});}world[_0x22f3('0x89')]=_0x42b4c6[_0x22f3('0x89')];world[_0x22f3('0x43')]=_0x42b4c6[_0x22f3('0x43')];world[_0x22f3('0x2c')]=_0x42b4c6['userimageImg'];world['axisLabels']=_0x42b4c6[_0x22f3('0x23')];let _0x4bdea9=new PIXI[(_0x22f3('0x65'))]({'antialias':![],'transparent':![],'resolution':0x1,'backgroundColor':0xffffff,'preserveDrawingBuffer':!![]});document[_0x22f3('0x2a')]('main')[_0x22f3('0x54')](_0x4bdea9[_0x22f3('0x10')]);_0x4bdea9[_0x22f3('0x5e')][_0x22f3('0x10')]['id']='chartCanvas';_0x4bdea9[_0x22f3('0x5e')][_0x22f3('0x10')][_0x22f3('0x6c')][_0x22f3('0x1d')]=_0x22f3('0x80');_0x4bdea9[_0x22f3('0x5e')][_0x22f3('0x10')][_0x22f3('0x6c')][_0x22f3('0x8e')]=_0x22f3('0x18');_0x4bdea9[_0x22f3('0x5e')][_0x22f3('0x10')][_0x22f3('0x6c')][_0x22f3('0x3f')]='0px';_0x4bdea9['renderer'][_0x22f3('0x10')][_0x22f3('0x6c')][_0x22f3('0x56')]=_0x22f3('0x33');_0x4bdea9['renderer']['view'][_0x22f3('0x6c')]['zIndex']='1';_0x4bdea9['renderer'][_0x22f3('0x2')](window[_0x22f3('0x66')],window['innerHeight']);_0x4bdea9[_0x22f3('0x5e')]['view'][_0x22f3('0x5f')](_0x22f3('0x37'),_0x4f298d=>{_0x4f298d[_0x22f3('0x21')]();});window[_0x22f3('0x5f')](_0x22f3('0x2'),_0x409c70=>{_0x4bdea9[_0x22f3('0x5e')]['resize'](window[_0x22f3('0x66')],window[_0x22f3('0x64')]);});let _0x3fcc2b=new PIXI[(_0x22f3('0x63'))]();_0x3fcc2b['interactive']=!![];_0x4bdea9[_0x22f3('0x2e')][_0x22f3('0x1b')](_0x3fcc2b);let _0x511ca6=_0x42b4c6[_0x22f3('0x2c')]?_0x42b4c6['userimageImg']:await loadSyncImage(_0x42b4c6[_0x22f3('0x89')]);let _0x1d14be=function(_0x284f08){let _0xc65528=new PIXI[(_0x22f3('0x44'))](new PIXI[(_0x22f3('0x58'))](new PIXI[(_0x22f3('0x40'))](_0x284f08)));return _0xc65528;}(_0x511ca6);let _0x1a5b40=function(_0x1131bf){return new PIXI['Sprite'](new PIXI[(_0x22f3('0x58'))](new PIXI[(_0x22f3('0x40'))](_0x1131bf)));};let _0x1ad395=[];for(let _0x59a2e3 of _0x42b4c6['iconFilenames']){_0x1ad395[_0x22f3('0x52')](_0x1a5b40(await loadSyncImage(_0x59a2e3)));}let _0x54c0da=new PIXI[(_0x22f3('0x63'))]();let _0x284e7a=new PIXI[(_0x22f3('0x63'))]();_0x284e7a[_0x22f3('0x6d')]=_0x1d14be[_0x22f3('0x72')];_0x284e7a[_0x22f3('0x83')]=_0x1d14be[_0x22f3('0x85')];userlabel=new PIXI[(_0x22f3('0x63'))]();if(_0x42b4c6['axisLabels']){let _0x100cef=0x24;let _0x14b98f=0x40;let _0x3dfc3b=0x999999;let _0x30f3c0=0xff99aa;let _0x161218=0x99ccff;let _0x2989f2=function(_0x7be7b4,_0x57599c,_0x1b849b,_0x5d8a2b){let _0x2668c8=new PIXI[(_0x22f3('0x77'))](_0x7be7b4,{'fontFamily':'sans-serif','fontWeight':_0x22f3('0x7'),'fontSize':_0x57599c,'fill':_0x1b849b,'dropShadow':!![],'dropShadowAlpha':0.12});_0x2668c8[_0x22f3('0x72')]=_0x2668c8[_0x22f3('0x72')]*0.9;_0x2668c8['x']=_0x5d8a2b['x'](_0x2668c8);_0x2668c8['y']=_0x5d8a2b['y'](_0x2668c8);userlabel[_0x22f3('0x1b')](_0x2668c8);};let _0x549b41=_0x1d14be;let _0x5a4cd3=_0x42b4c6[_0x22f3('0x23')];_0x2989f2(_0x5a4cd3[_0x22f3('0x91')],_0x100cef,_0x3dfc3b,{'x':_0x9facb1=>0x28,'y':_0xfc06fc=>0x14});_0x2989f2(_0x5a4cd3['left'],_0x14b98f,_0x30f3c0,{'x':_0x294572=>0x14,'y':_0x47c9a6=>_0x549b41[_0x22f3('0x85')]/0x2-_0x47c9a6[_0x22f3('0x85')]-0x0});_0x2989f2(_0x5a4cd3['right'],_0x14b98f,_0x30f3c0,{'x':_0x22c0af=>_0x549b41[_0x22f3('0x72')]-_0x22c0af[_0x22f3('0x72')]-0x14,'y':_0x153366=>_0x549b41[_0x22f3('0x85')]/0x2+0x0});_0x2989f2(_0x5a4cd3[_0x22f3('0x8e')],_0x14b98f,_0x161218,{'x':_0x23ce32=>_0x549b41[_0x22f3('0x72')]/0x2+0x14,'y':_0x55e6d5=>0xa});_0x2989f2(_0x5a4cd3['bottom'],_0x14b98f,_0x161218,{'x':_0x1a321c=>_0x549b41['width']/0x2-_0x1a321c[_0x22f3('0x72')]-0x14,'y':_0x44035c=>_0x549b41[_0x22f3('0x85')]-_0x44035c['height']-0x14});}let _0x2e671c=0xa;let _0x1d48a4=0x5;let _0x5ea074=_0x2e671c*0x2;let _0x3ce0eb=_0x2e671c+0x32;let _0x255012=_0x42b4c6[_0x22f3('0x43')]||0x12;let _0x5d62da=Math[_0x22f3('0x1e')](_0x1d14be[_0x22f3('0x72')]*_0x1d14be[_0x22f3('0x85')])/0x8;let _0x1e2b48=Math[_0x22f3('0x1e')](_0x1d14be[_0x22f3('0x72')]*_0x1d14be['height'])/0x6;let _0x27e664=0x5;let _0x359f16=_0x1d14be[_0x22f3('0x85')]/Math[_0x22f3('0xb')](_0x1ad395[_0x22f3('0x49')],_0x27e664);let _0x3835dc=_0x359f16-_0x1d48a4;let _0x51e9f3=_0x359f16-_0x1d48a4;let _0x5442a1=(_0x5ea074+_0x3835dc)/_0x1d14be['width'];;let _0x490ac0=0.5;let _0x46fdbf=_0x5442a1;let _0x382a7a=_0x22f3('0x36');let _0x15add2=_0x22f3('0xc');const _0x24ef5=!![];_0x3fcc2b[_0x22f3('0x1b')](_0x1d14be);_0x1d14be['x']=_0x2e671c;_0x1d14be['y']=_0x2e671c;_0x3fcc2b[_0x22f3('0x1b')](userlabel);userlabel['x']=_0x2e671c;userlabel['y']=_0x2e671c;_0x3fcc2b[_0x22f3('0x1b')](_0x284e7a);_0x284e7a['x']=_0x2e671c;_0x284e7a['y']=_0x2e671c;_0x3fcc2b[_0x22f3('0x1b')](_0x54c0da);_0x54c0da['x']=_0x1d14be[_0x22f3('0x72')]+_0x5ea074;_0x54c0da['y']=_0x2e671c;let _0x26252c={'limits':{}};function _0x1b1b51(_0x1f28ed){_0x26252c[_0x22f3('0x29')]=!![];_0x26252c['data']=_0x1f28ed[_0x22f3('0x42')];_0x26252c[_0x22f3('0xa')]=this;_0x26252c[_0x22f3('0x57')]=_0x26252c['target'][_0x22f3('0x72')]/0x2;_0x26252c['minY']=_0x26252c['target'][_0x22f3('0x85')]/0x2;_0x26252c['maxX']=_0x284e7a[_0x22f3('0x6d')]-_0x26252c[_0x22f3('0xa')]['width']/0x2;_0x26252c[_0x22f3('0x11')]=_0x284e7a[_0x22f3('0x83')]-_0x26252c[_0x22f3('0xa')][_0x22f3('0x85')]/0x2;}function _0x19373b(_0xddde91){_0x26252c[_0x22f3('0x29')]=![];_0x26252c['data']=null;_0x26252c['target']=null;}function _0x10b503(){if(_0x26252c[_0x22f3('0x29')]){let _0x571ceb=_0x26252c['data']['getLocalPosition'](_0x26252c['target'][_0x22f3('0x70')]);_0x26252c[_0x22f3('0xa')][_0x22f3('0x1d')]['x']=getInnerValue(_0x571ceb['x'],_0x26252c[_0x22f3('0x57')],_0x26252c[_0x22f3('0x14')]);_0x26252c['target'][_0x22f3('0x1d')]['y']=getInnerValue(_0x571ceb['y'],_0x26252c[_0x22f3('0x6f')],_0x26252c['maxY']);}}let _0x279af6=new PIXI[(_0x22f3('0x12'))]['ColorMatrixFilter']();_0x279af6[_0x22f3('0x73')](0.32);let _0x401570=_0x1d14be['width']*_0x490ac0-_0x2e671c;let _0x21570d=new Map();_0x1ad395['forEach']((_0x1b8662,_0x277d6b)=>{_0x1b8662[_0x22f3('0x1a')]=_0x277d6b;_0x1b8662['x']=_0x2e671c;_0x1b8662['y']=_0x359f16*_0x277d6b;_0x1b8662[_0x22f3('0x72')]=_0x3835dc;_0x1b8662[_0x22f3('0x85')]=_0x51e9f3;let _0xfc0830=new PIXI['Text']('',{'fontFamily':_0x22f3('0x8b'),'fontSize':_0x255012,'fill':0x0,'align':_0x22f3('0x3f')});_0xfc0830['x']=_0x1b8662['x']+_0x1b8662['width']+_0x2e671c;_0xfc0830['y']=_0x1b8662['y']+(_0x1b8662[_0x22f3('0x85')]-_0x255012-_0x2e671c)/0x2;_0x54c0da[_0x22f3('0x1b')](_0xfc0830);let _0x3c3517=new PIXI[(_0x22f3('0x44'))]();_0x3c3517['width']=_0x401570;_0x3c3517['height']=_0x359f16;_0x3c3517['x']=_0xfc0830['x'];_0x3c3517['y']=_0x1b8662['y'];_0x54c0da[_0x22f3('0x1b')](_0x3c3517);_0x54c0da[_0x22f3('0x1b')](_0x1b8662);_0x1b8662[_0x22f3('0x12')]=[_0x279af6];let _0x874146={'icon':null,'text':_0xfc0830,'textIcon':_0x1b8662,'status':![]};world[_0x22f3('0x51')]['set'](_0x277d6b,_0x874146);_0x1b8662[_0x22f3('0x7b')]=!![];let _0x2d154c=function(_0xb8d6c9,_0x3901b7){if(_0x874146[_0x22f3('0x2d')]){let _0x2b903e=_0x21570d[_0x22f3('0x4c')](_0x1b8662[_0x22f3('0x1a')]);_0x284e7a[_0x22f3('0x60')](_0x2b903e);_0x284e7a['addChild'](_0x2b903e);}else{_0x1b8662[_0x22f3('0x12')]=[];let _0x3150bb=PIXI['Sprite'][_0x22f3('0x8f')](_0x1b8662['_texture']);_0x21570d[_0x22f3('0x5d')](_0x1b8662[_0x22f3('0x1a')],_0x3150bb);_0x3150bb[_0x22f3('0x1a')]=_0x1b8662[_0x22f3('0x1a')];_0x3150bb[_0x22f3('0x72')]=getInnerValue(_0x1b8662[_0x22f3('0x72')],_0x5d62da,_0x1e2b48);_0x3150bb['height']=getInnerValue(_0x1b8662[_0x22f3('0x85')],_0x5d62da,_0x1e2b48);_0x284e7a[_0x22f3('0x1b')](_0x3150bb);_0x3150bb['x']=_0xb8d6c9;_0x3150bb['y']=_0x3901b7;_0x3150bb[_0x22f3('0x7b')]=!![];_0x3150bb[_0x22f3('0x0')]=!![];_0x3150bb[_0x22f3('0x55')][_0x22f3('0x5d')](0.5);_0x3150bb['on'](_0x22f3('0x22'),_0x1b1b51)['on'](_0x22f3('0x30'),_0x1b1b51)['on'](_0x22f3('0x48'),_0x19373b)['on']('mouseupoutside',_0x19373b)['on'](_0x22f3('0x76'),_0x19373b)['on'](_0x22f3('0x59'),_0x19373b)['on'](_0x22f3('0x7c'),_0x10b503)['on']('touchmove',_0x10b503);_0x874146['status']=!![];_0x874146[_0x22f3('0x94')]=_0x3150bb;}};_0x1b8662['on'](_0x22f3('0x25'),function(_0x444982){let _0x396915=_0x284e7a[_0x22f3('0x6d')]/0x2;let _0x1d0457=_0x284e7a[_0x22f3('0x83')]/0x2;_0x2d154c(_0x396915,_0x1d0457);});_0x874146[_0x22f3('0x84')]=_0x2d154c;_0xfc0830[_0x22f3('0x7b')]=!![];_0x3c3517[_0x22f3('0x7b')]=!![];let _0x46b07a=function(){let _0x23bdf2=prompt(_0x22f3('0x53'),_0xfc0830['text']);_0xfc0830[_0x22f3('0x4b')]=_0x23bdf2!==null?_0x23bdf2:_0xfc0830[_0x22f3('0x4b')];};_0xfc0830['on'](_0x22f3('0x25'),_0x46b07a);_0x3c3517['on'](_0x22f3('0x25'),_0x46b07a);});let _0x23d1d7=_0x1d14be[_0x22f3('0x72')]*(0x1+_0x490ac0)+_0x2e671c*0x2;let _0x24e367=_0x1d14be[_0x22f3('0x72')]*(0x1+_0x46fdbf)+_0x2e671c*0x2;let _0x5dcab3=_0x1d14be[_0x22f3('0x85')]+_0x2e671c+_0x3ce0eb;let _0x2cbfc3=_0x23d1d7+_0x2e671c*0x2;let _0x5a07f8=_0x24e367+_0x2e671c*0x2;let _0x4e2e89=_0x1d14be[_0x22f3('0x85')]+_0x2e671c*0x2;let _0x253c8e=_0x1c2ec0=>{let _0x5a152e=world[_0x22f3('0x74')]?_0x23d1d7:_0x24e367;world[_0x22f3('0x16')]=world[_0x22f3('0x74')]?_0x2cbfc3:_0x5a07f8;world[_0x22f3('0x2b')]=_0x4e2e89;_0x4bdea9[_0x22f3('0x5e')][_0x22f3('0x2')](window[_0x22f3('0x66')],window[_0x22f3('0x64')]);world['scale']=_0x3fcc2b[_0x22f3('0x78')]['x']=_0x3fcc2b[_0x22f3('0x78')]['y']=Math[_0x22f3('0x20')](window[_0x22f3('0x66')]/_0x5a152e,window[_0x22f3('0x64')]/_0x5dcab3);};window[_0x22f3('0x5f')](_0x22f3('0x2'),_0x253c8e);let _0x2c1b6f=document[_0x22f3('0x27')](_0x22f3('0x90'));let _0x441f8c=function(_0x2f899a){world[_0x22f3('0x74')]=_0x2f899a;_0x2c1b6f[_0x22f3('0x95')]=_0x2f899a?_0x15add2:_0x382a7a;for(let _0x276d22 of world[_0x22f3('0x51')][_0x22f3('0x6e')]()){_0x276d22[_0x22f3('0x4b')][_0x22f3('0x50')]=_0x2f899a;}_0x253c8e();};_0x2c1b6f[_0x22f3('0x5f')](_0x22f3('0x7f'),function(_0x486393){_0x441f8c(!world[_0x22f3('0x74')]);});_0x441f8c(_0x24ef5);if(_0x42b4c6[_0x22f3('0x2d')]){for(let _0x2d46bf of _0x42b4c6['status']){let _0x2c422f=world[_0x22f3('0x51')]['get'](_0x2d46bf[_0x22f3('0x1a')]);if(_0x2d46bf[_0x22f3('0x8c')]){_0x2c422f[_0x22f3('0x4b')][_0x22f3('0x4b')]=_0x2d46bf['desc'];}if(_0x2d46bf[_0x22f3('0x7e')]){_0x2c422f[_0x22f3('0x84')](_0x2d46bf[_0x22f3('0x7e')]['x'],_0x2d46bf['pos']['y']);}}}}(function(){let _0xa49b24=document[_0x22f3('0x27')](_0x22f3('0x1'));let _0x4c99bf=document[_0x22f3('0x27')](_0x22f3('0xf'));let _0x4828e8=document[_0x22f3('0x27')](_0x22f3('0x41'));let _0x3a8192=document[_0x22f3('0x27')](_0x22f3('0x34'));let _0x5915f3=document[_0x22f3('0x27')](_0x22f3('0x1f'));var _0x25cf35=null;let _0x4cba0a=function(_0x3344a5){if(_0x4c99bf[_0x22f3('0x8d')]===_0x22f3('0x5c')){_0x4828e8['style']['display']=_0x22f3('0x33');_0x3a8192[_0x22f3('0x6c')][_0x22f3('0x56')]=_0x22f3('0x6a');_0xa49b24['removeAttribute'](_0x22f3('0x86'));}else if(_0x4c99bf['value']===_0x22f3('0x28')){_0x4828e8[_0x22f3('0x6c')]['display']='none';_0x3a8192['style'][_0x22f3('0x56')]=_0x22f3('0x33');_0xa49b24[_0x22f3('0x88')](_0x22f3('0x86'),'disabled');}else{_0x4828e8[_0x22f3('0x6c')]['display']=_0x22f3('0x6a');_0x3a8192[_0x22f3('0x6c')]['display']=_0x22f3('0x6a');_0xa49b24[_0x22f3('0x6b')](_0x22f3('0x86'));}_0x25cf35=null;};_0x4c99bf[_0x22f3('0x5f')]('change',_0x4cba0a);_0x4cba0a();_0x5915f3[_0x22f3('0x5f')](_0x22f3('0x7d'),function(_0x194c97){if(_0x194c97[_0x22f3('0xa')]['files'][_0x22f3('0x49')]===0x1){_0x25cf35=_0x194c97[_0x22f3('0xa')]['files'];_0xa49b24[_0x22f3('0x6b')](_0x22f3('0x86'));}else{_0x25cf35=null;_0xa49b24[_0x22f3('0x88')](_0x22f3('0x86'),_0x22f3('0x86'));}});let _0x3b63fa=()=>{document['querySelector'](_0x22f3('0x5b'))[_0x22f3('0x6c')]['display']='none';document[_0x22f3('0x27')](_0x22f3('0x5a'))[_0x22f3('0x6c')][_0x22f3('0x56')]=_0x22f3('0x6a');document[_0x22f3('0x27')](_0x22f3('0x68'))[_0x22f3('0x6c')][_0x22f3('0x56')]=_0x22f3('0x33');};let _0x188e7a=function(_0x4657d4){return new Promise(function(_0x3ab556,_0x2d3b54){let _0x4aec59=new FileReader();_0x4aec59[_0x22f3('0x3d')]=async function(){return _0x3ab556(await loadSyncImage(_0x4aec59['result']));};_0x4aec59[_0x22f3('0x38')]=_0x4e61ce=>_0x2d3b54(_0x4e61ce);_0x4aec59[_0x22f3('0x8a')](_0x4657d4);});};_0xa49b24[_0x22f3('0x5f')](_0x22f3('0x7f'),async function(_0x16b513){_0xa49b24[_0x22f3('0x88')](_0x22f3('0x86'),_0x22f3('0x86'));let _0x401604=_0x4c99bf[_0x22f3('0x8d')];let _0x43f63b=Array[_0x22f3('0x8f')](document[_0x22f3('0x4a')](_0x22f3('0x8')))[_0x22f3('0x79')](_0x4e5cb0=>_0x4e5cb0['value']);let _0x25ae52=parseInt(document[_0x22f3('0x27')](_0x22f3('0x24'))[_0x22f3('0x8d')],0xa);let _0x4b96f9=function(_0x41b308){init(Object['assign']({'haikeiFilename':_0x401604,'iconFilenames':_0x43f63b,'fontSize':_0x25ae52},_0x41b308));_0x3b63fa();};if(_0x4c99bf[_0x22f3('0x8d')]===_0x22f3('0x5c')){_0x4b96f9({'axisLabels':{'title':document['querySelector'](_0x22f3('0xd'))[_0x22f3('0x8d')],'left':document[_0x22f3('0x27')](_0x22f3('0x46'))[_0x22f3('0x8d')],'right':document[_0x22f3('0x27')](_0x22f3('0x3a'))[_0x22f3('0x8d')],'top':document[_0x22f3('0x27')](_0x22f3('0x92'))[_0x22f3('0x8d')],'bottom':document['querySelector']('#usertext-bottom')[_0x22f3('0x8d')]},'haikeiFilename':_0x22f3('0x82')});}else if(_0x4c99bf[_0x22f3('0x8d')]===_0x22f3('0x28')){_0x4b96f9({'userimageImg':await _0x188e7a(_0x25cf35[0x0])});}else{_0x4b96f9();}});let _0x3cf565=document[_0x22f3('0x27')]('#loadPastResult');let _0x5abc8d=document[_0x22f3('0x27')](_0x22f3('0x4d'));_0x3cf565[_0x22f3('0x5f')](_0x22f3('0x7f'),async function(_0x442782){let _0xf3726c=document['querySelector'](_0x22f3('0x3b'));_0xf3726c[_0x22f3('0x95')]='';_0x3cf565[_0x22f3('0x88')](_0x22f3('0x86'),_0x22f3('0x86'));try{let _0x4181e7=JSON[_0x22f3('0xe')](_0x5abc8d[_0x22f3('0x8d')]);if(_0x4181e7[_0x22f3('0x89')]===_0x22f3('0x28')){if(!_0x25cf35){throw new Error(_0x22f3('0x75'));}loadFromObj(_0x4181e7,await _0x188e7a(_0x25cf35[0x0]));_0x3b63fa();}else{loadFromObj(_0x4181e7);_0x3b63fa();}}catch(_0x44d922){_0xf3726c[_0x22f3('0x95')]=_0x44d922[_0x22f3('0x6')];console[_0x22f3('0x31')](_0x44d922);_0x3cf565['removeAttribute'](_0x22f3('0x86'));}});if(window['localStorage']){let _0x3e87f0=window[_0x22f3('0x87')]['getItem'](_0x22f3('0x9'));if(_0x3e87f0){_0x5abc8d['value']=_0x3e87f0;}}}());document[_0x22f3('0x2a')](_0x22f3('0x67'))['addEventListener'](_0x22f3('0x7f'),function(_0xdba512){let _0x5abfcc=document['querySelector'](_0x22f3('0x68'));let _0x3d8172=document[_0x22f3('0x27')](_0x22f3('0x39'));let _0x4bab34=document[_0x22f3('0x27')](_0x22f3('0x4'));let _0x170948=_0x5abfcc[_0x22f3('0x27')](_0x22f3('0x3e'));let _0x5a32b5=_0x3d8172[_0x22f3('0x27')](_0x22f3('0x96'));_0x5a32b5[_0x22f3('0x5')]=_0x170948[_0x22f3('0x15')]();_0x5a32b5[_0x22f3('0x3d')]=function(){_0x170948[_0x22f3('0x26')]();let _0x9093da=_0x3d8172[_0x22f3('0x27')](_0x22f3('0x35'));let _0x355612=_0x9093da[_0x22f3('0x62')]('2d');let _0x4cc77f=world[_0x22f3('0x16')]*world[_0x22f3('0x78')];let _0x7da16a=world[_0x22f3('0x2b')]*world[_0x22f3('0x78')];_0x355612[_0x22f3('0x35')][_0x22f3('0x72')]=_0x4cc77f;_0x355612['canvas'][_0x22f3('0x85')]=_0x7da16a;_0x355612[_0x22f3('0x61')](_0x5a32b5,0x0,0x0,_0x4cc77f,_0x7da16a,0x0,0x0,_0x4cc77f,_0x7da16a);let _0x28a460=_0x4bab34['querySelector'](_0x22f3('0x69'));_0x28a460[_0x22f3('0x5')]=_0x9093da[_0x22f3('0x15')]();_0x28a460[_0x22f3('0x3d')]=function(){let _0x427b49=_0x4bab34['querySelector']('a');_0x427b49[_0x22f3('0x3c')]=_0x22f3('0x2f')+getDateStringForFile(new Date());_0x427b49['href']=_0x28a460[_0x22f3('0x5')];};};document['querySelector'](_0x22f3('0x71'))[_0x22f3('0x8d')]=JSON[_0x22f3('0x3')](world['save']());_0x5abfcc[_0x22f3('0x6c')][_0x22f3('0x56')]=_0x22f3('0x6a');_0x4bab34[_0x22f3('0x6c')]['display']='block';});
  </script>
</body>
</html>
