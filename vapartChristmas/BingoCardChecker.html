<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>ビンゴカードチェッカー</title>
  <meta name="twitter:card" content="summary_large_image">
  <meta property="og:title" content="ビンゴカードチェッカー">
  <meta property="og:url"   content="https://pecmm.github.io/vapartChristmas/BingoCardChecker.html" />
  <meta property="og:image" content="https://pecmm.github.io/vapartChristmas/thumb/thumb-checker.png?7fef1aa8">
  <link rel='stylesheet' href='../assets/tooltip.css' />
  <style>
    #main {
      height: 100%;
      margin: 1.5em;
      display:none;
    }
    
    table.control th {
      min-width: 6em;
      text-align: right;
    }
    table.control td {
      min-width: 12em;
    }
    table.control input[type='number'] {
      width: 5em;
      text-align: right;
    }
    
    #controller #bingocard-input {
      width: 30em;
      padding: 3em;
      background-color: #cccccc;
    }
  </style>
</head>
<body>
  <div id='main'>
    <canvas id='canvas'></canvas>
    
    <hr />
    <table class='control' border='1' cellpadding='3'>
      <tr> <th>padding</th> <td><label><input type='number' id='padding' /> px<div class='tltp-for-prev-input'>枠の端から丸までの幅を指定します。<br />この値を大きくすると丸が小さくなります。</div></label></td> </tr>
      <tr> <th>線の太さ</th> <td><label><input type='number' id='lineWidth' /> px<div class='tltp-for-prev-input'>丸の太さを指定します。</div></label></td> </tr>
      <tr> <th>線の色</th> <td><label><input type='color' id='lineColor' /> <span id='lineColorValue'></span></label><br /></td> </tr>
      <tr> <th>線の透過度</th> <td><label><input type='number' id='lineAlpha' /><div class='tltp-for-prev-input'>丸の透過度を指定します。</div></label></td> </tr>
    </table>
    <button id='update'>表示を更新</button>
    <br /><br />
    <button id='saveImage'>画像を保存</button>
  </div>
  <div id='controller'>
    <input type="file" accept="image/*" id="bingocard-input" />
    <br />
    数字を入力したビンゴカードの画像を選択してください。
  </div>
  <hr />
  <footer></footer>
  
  <script>
const _0x145f=['#lineColorValue','checked','href','value','alpha','#bingocard-input','strokeStyle','get','onload','#lineColor','files','addEventListener','change','fillRect','createElement','beginPath','firstTop','display','referenceHTML','centerCol','step','min','cols','boxCheck','length','input','test','default','height','firstLeft','offsetX','bingo','readAsDataURL','title','rows','createObjectURL','target','debug','getDate','footer','#update','floor','width','download','find','hit','block','onerror','textContent','paramScriptName','toString','insertAdjacentHTML','stroke','box','getHours','centerRow','#lineAlpha','exec','lineWidth','style','yStep','name','searchParams','paramScript','#controller','max','padStart','bingo-vapartChristmas2020.js','toDataURL','#6666CC','forEach','imageStyle','split','save','push','globalAlpha','freeCenter','arc','querySelector','#3333FF','filter','padding','imagePath','entries','getMonth','offsetY','click','#canvas','charCodeAt','afterbegin','getFullYear','getSeconds','none'];(function(_0x43cf9d,_0x3fae9c){const _0x145f48=function(_0x2f73b0){while(--_0x2f73b0){_0x43cf9d['push'](_0x43cf9d['shift']());}};_0x145f48(++_0x3fae9c);}(_0x145f,0x14c));const _0x2f73=function(_0x43cf9d,_0x3fae9c){_0x43cf9d=_0x43cf9d-0xd1;let _0x145f48=_0x145f[_0x43cf9d];return _0x145f48;};const _0x4992ac=_0x2f73;function loadSyncImage(_0xb743f){return new Promise((_0x5ed677,_0x1c32ac)=>{const _0x58b027=_0x2f73,_0x4e97f8=new Image();_0x4e97f8[_0x58b027(0x101)]=()=>_0x5ed677(_0x4e97f8),_0x4e97f8[_0x58b027(0x128)]=_0x2a87ab=>_0x1c32ac(_0x2a87ab),_0x4e97f8['src']=_0xb743f;});}const readUserImage=function(_0x329cf3){return new Promise(function(_0x1d17ec,_0x522149){const _0x355d11=_0x2f73,_0x27cd0c=new FileReader();_0x27cd0c[_0x355d11(0x101)]=async function(){return _0x1d17ec(await loadSyncImage(_0x27cd0c['result']));},_0x27cd0c['onerror']=_0x167129=>_0x522149(_0x167129),_0x27cd0c[_0x355d11(0x119)](_0x329cf3);});};function srcToURL(_0x288299){const _0x23a4f6=_0x2f73,_0x13a3d2=atob(_0x288299[_0x23a4f6(0xe4)](',')[0x1]),_0x44f515=/:([a-zA-Z\/]+);/[_0x23a4f6(0xd5)](_0x288299)[0x1],_0x3e2582=Uint8Array['from'](_0x13a3d2[_0x23a4f6(0xe4)](''),_0x55df0e=>_0x55df0e[_0x23a4f6(0xf4)]()),_0x294730=new Blob([_0x3e2582],{'type':_0x44f515});return URL[_0x23a4f6(0x11c)](_0x294730);}function saveCanvasAsImage(_0x5436ea,_0x2652c2){const _0x36b78a=_0x2f73,_0x711981=srcToURL(_0x5436ea[_0x36b78a(0xe0)]()),_0x50265c=document[_0x36b78a(0x107)]('a');_0x50265c[_0x36b78a(0xfb)]=_0x711981,_0x50265c[_0x36b78a(0x124)]=_0x2652c2,_0x50265c[_0x36b78a(0xf2)]();}function pad0String(_0x33952c,_0x2df5ce){const _0x189199=_0x2f73;return _0x2df5ce[_0x189199(0x12b)]()[_0x189199(0xde)](_0x33952c,'0');}function getDateStringForFile(_0x3cf170){const _0x2defb4=_0x2f73;return _0x3cf170[_0x2defb4(0xf6)]()+'年'+pad0String(0x2,_0x3cf170[_0x2defb4(0xf0)]()+0x1)+'月'+pad0String(0x2,_0x3cf170[_0x2defb4(0x11f)]())+'日-'+pad0String(0x2,_0x3cf170[_0x2defb4(0xd2)]())+'時'+pad0String(0x2,_0x3cf170['getMinutes']())+'分'+pad0String(0x2,_0x3cf170[_0x2defb4(0xf7)]())+'秒';}function toRelativeName(_0x417a8a){const _0x44c3e5=_0x2f73;return/:\/\//[_0x44c3e5(0x113)](_0x417a8a)?_0x417a8a:/^[.\/]/['test'](_0x417a8a)?_0x417a8a:'./'+_0x417a8a;}async function start(_0x1d110d,_0x1e3060){const _0x2e77f6=_0x2f73,_0x28f268=_0x1d110d[_0x2e77f6(0x118)];_0x28f268['cellCount']=_0x28f268[_0x2e77f6(0x11b)]*_0x28f268[_0x2e77f6(0x10f)]-(_0x28f268[_0x2e77f6(0xe8)]?0x1:0x0);_0x28f268['freeCenter']&&(_0x28f268[_0x2e77f6(0x10c)]=Math['floor'](_0x28f268[_0x2e77f6(0x10f)]/0x2),_0x28f268[_0x2e77f6(0xd3)]=Math[_0x2e77f6(0x122)](_0x28f268['rows']/0x2));const _0x14c032=document['querySelector'](_0x2e77f6(0xf3)),_0x16f328=_0x14c032['getContext']('2d');{_0x14c032['width']=_0x1e3060[_0x2e77f6(0x123)],_0x14c032[_0x2e77f6(0x115)]=_0x1e3060[_0x2e77f6(0x115)];for(let [_0x269960,_0x3816b0]of Object[_0x2e77f6(0xef)](_0x1d110d[_0x2e77f6(0x118)][_0x2e77f6(0xe3)])){_0x14c032['style'][_0x269960]=_0x3816b0;}}const _0x2add4f=document['querySelector']('#padding'),_0x3b6281=document[_0x2e77f6(0xea)]('#lineWidth'),_0x1e0c71=document[_0x2e77f6(0xea)](_0x2e77f6(0x102)),_0x4130c2=document[_0x2e77f6(0xea)](_0x2e77f6(0xf9)),_0x47b65e=document[_0x2e77f6(0xea)](_0x2e77f6(0xd4)),_0xc1beab=document['querySelector'](_0x2e77f6(0x121));{_0x2add4f['value']=_0x28f268[_0x2e77f6(0x110)][_0x2e77f6(0xed)],_0x3b6281[_0x2e77f6(0xfc)]=_0x28f268[_0x2e77f6(0x110)][_0x2e77f6(0xd6)],_0x1e0c71[_0x2e77f6(0xfc)]=_0x28f268[_0x2e77f6(0x110)]['color']||_0x2e77f6(0xe1),_0x47b65e['value']=_0x28f268[_0x2e77f6(0x110)][_0x2e77f6(0xfd)]||0.75,_0x2add4f[_0x2e77f6(0x10e)]=0x1,_0x2add4f[_0x2e77f6(0x10d)]=0x1,_0x3b6281[_0x2e77f6(0x10e)]=0x1,_0x3b6281['step']=0x1,_0x47b65e[_0x2e77f6(0x10e)]=0.01,_0x47b65e[_0x2e77f6(0x10d)]=0.01,_0x47b65e[_0x2e77f6(0xdd)]=0x1;const _0x4c5712=()=>{const _0x374346=_0x2e77f6;_0x4130c2[_0x374346(0x129)]=_0x1e0c71['value'];};_0x1e0c71['addEventListener'](_0x2e77f6(0x112),_0x4c5712),_0x4c5712();}const _0xd3ede4=[];for(let _0x4aaf3d=0x0;_0x4aaf3d<_0x28f268[_0x2e77f6(0x11b)];_0x4aaf3d+=0x1){for(let _0x42faef=0x0;_0x42faef<_0x28f268[_0x2e77f6(0x10f)];_0x42faef+=0x1){if(_0x28f268[_0x2e77f6(0xe8)]&&_0x42faef==_0x28f268[_0x2e77f6(0x10c)]&&_0x4aaf3d==_0x28f268[_0x2e77f6(0xd3)])continue;const _0x32d493={'x0':_0x28f268[_0x2e77f6(0xd1)][_0x2e77f6(0x116)]+_0x42faef*_0x28f268[_0x2e77f6(0xd1)]['xStep'],'y0':_0x28f268[_0x2e77f6(0xd1)][_0x2e77f6(0x109)]+_0x4aaf3d*_0x28f268[_0x2e77f6(0xd1)][_0x2e77f6(0xd8)],'rd':Math[_0x2e77f6(0x10e)](_0x28f268['box']['width'],_0x28f268[_0x2e77f6(0xd1)][_0x2e77f6(0x115)])/0x2,'checked':![]};_0x32d493['x1']=_0x32d493['x0']+_0x28f268[_0x2e77f6(0xd1)][_0x2e77f6(0x123)],_0x32d493['y1']=_0x32d493['y0']+_0x28f268[_0x2e77f6(0xd1)][_0x2e77f6(0x115)],_0x32d493['xc']=_0x32d493['x0']+_0x28f268[_0x2e77f6(0xd1)][_0x2e77f6(0x123)]/0x2,_0x32d493['yc']=_0x32d493['y0']+_0x28f268[_0x2e77f6(0xd1)][_0x2e77f6(0x115)]/0x2,_0x32d493['hit']=(_0xcf881d,_0x35f5da)=>_0x32d493['x0']<=_0xcf881d&&_0xcf881d<=_0x32d493['x1']&&_0x32d493['y0']<=_0x35f5da&&_0x35f5da<=_0x32d493['y1'],_0xd3ede4[_0x2e77f6(0xe6)](_0x32d493);}}const _0x3f2fd7=()=>{const _0x2bde6c=_0x2e77f6;_0x16f328['globalAlpha']=0x1,_0x16f328['drawImage'](_0x1e3060,0x0,0x0),_0x16f328[_0x2bde6c(0xd6)]=Number(_0x3b6281[_0x2bde6c(0xfc)]),_0x16f328[_0x2bde6c(0xff)]=_0x1e0c71['value'],_0x16f328[_0x2bde6c(0xe7)]=Number(_0x47b65e[_0x2bde6c(0xfc)]);const _0x2c8d23=Number(_0x2add4f[_0x2bde6c(0xfc)]);_0xd3ede4[_0x2bde6c(0xec)](_0x2d1e6d=>_0x2d1e6d[_0x2bde6c(0xfa)])[_0x2bde6c(0xe2)](_0x4510df=>{const _0x23985d=_0x2bde6c;_0x16f328[_0x23985d(0x108)](),_0x16f328[_0x23985d(0xe9)](_0x4510df['xc'],_0x4510df['yc'],_0x4510df['rd']-_0x2c8d23,0x0,0x2*Math['PI']),_0x16f328[_0x23985d(0x12d)]();}),_0x28f268[_0x2bde6c(0x11e)]&&(_0x16f328[_0x2bde6c(0xe5)](),_0x16f328[_0x2bde6c(0xe7)]=0.5,_0x16f328['fillStyle']=_0x2bde6c(0xeb),_0xd3ede4[_0x2bde6c(0xe2)]((_0x14fd65,_0x4eb9c0)=>{const _0x4bf35b=_0x2bde6c;_0x16f328[_0x4bf35b(0x106)](_0x14fd65['x0'],_0x14fd65['y0'],_0x28f268[_0x4bf35b(0xd1)][_0x4bf35b(0x123)],_0x28f268['box'][_0x4bf35b(0x115)]);}),_0x16f328['restore']());};_0x14c032['addEventListener']('click',_0x1f6b89=>{const _0x4f9a48=_0x2e77f6,_0x423721=_0x14c032[_0x4f9a48(0x115)]/Number(window['getComputedStyle'](_0x14c032)[_0x4f9a48(0x115)]['replace'](/px$/,'')),_0x3ec19f=_0x1f6b89[_0x4f9a48(0x117)]*_0x423721,_0x50a639=_0x1f6b89[_0x4f9a48(0xf1)]*_0x423721,_0x8c6ec0=_0xd3ede4[_0x4f9a48(0x125)](_0x209557=>_0x209557[_0x4f9a48(0x126)](_0x3ec19f,_0x50a639));_0x8c6ec0&&(_0x8c6ec0['checked']=!_0x8c6ec0[_0x4f9a48(0xfa)],_0x3f2fd7());}),_0xc1beab[_0x2e77f6(0x104)](_0x2e77f6(0xf2),_0x3f2fd7),_0x3f2fd7(),document[_0x2e77f6(0xea)]('#saveImage')[_0x2e77f6(0x104)]('click',_0x1b05c9=>{const _0x355759=_0x2e77f6,_0x2da1e2=_0x1d110d[_0x355759(0x118)][_0x355759(0xd9)]+'-チェック-'+getDateStringForFile(new Date());saveCanvasAsImage(_0x14c032,_0x2da1e2);}),document[_0x2e77f6(0xea)]('#main')[_0x2e77f6(0xd7)][_0x2e77f6(0x10a)]=_0x2e77f6(0x127),document[_0x2e77f6(0xea)](_0x2e77f6(0xdc))['style'][_0x2e77f6(0x10a)]=_0x2e77f6(0xf8);}(async _0x150693=>{const _0x4cdabb=_0x2f73,_0x44d815=new URL(window['location'])[_0x4cdabb(0xda)][_0x4cdabb(0x100)](_0x4cdabb(0xdb))||_0x150693[_0x4cdabb(0x12a)];if(_0x44d815){const _0x3302a0=await import(toRelativeName(_0x44d815));_0x150693[_0x4cdabb(0x118)]=_0x3302a0[_0x4cdabb(0x114)];}document[_0x4cdabb(0x11a)]=_0x150693['bingo'][_0x4cdabb(0xd9)]?_0x150693['bingo'][_0x4cdabb(0xd9)]+'\x20'+document[_0x4cdabb(0x11a)]:document[_0x4cdabb(0x11a)],document['querySelector'](_0x4cdabb(0x120))[_0x4cdabb(0x12c)](_0x4cdabb(0xf5),_0x150693[_0x4cdabb(0x118)][_0x4cdabb(0x10b)]),document[_0x4cdabb(0xea)](_0x4cdabb(0xfe))['addEventListener'](_0x4cdabb(0x105),async _0xf3e1f9=>{const _0x5cfabf=_0x4cdabb;_0xf3e1f9[_0x5cfabf(0x11d)][_0x5cfabf(0x103)][_0x5cfabf(0x111)]===0x1&&start(_0x150693,await readUserImage(_0xf3e1f9['target'][_0x5cfabf(0x103)][0x0]));}),_0x150693[_0x4cdabb(0x118)][_0x4cdabb(0x11e)]&&start(_0x150693,await loadSyncImage(_0x150693['bingo'][_0x4cdabb(0xee)]));})({'paramScriptName':_0x4992ac(0xdf)});
  </script>
</body>
</html>
